!function(b){var c={};function a(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return b[d].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=b,a.c=c,a.d=function(b,c,d){a.o(b,c)||Object.defineProperty(b,c,{configurable:!1,enumerable:!0,get:d})},a.n=function(c){var b=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(b,"a",b),b},a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.p="/invoice-generator/packs/",a(a.s=3)}([function(f,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var g=function(){function a(a,b,c){this.eventTarget=a,this.eventName=b,this.eventOptions=c,this.unorderedBindings=new Set}return a.prototype.connect=function(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)},a.prototype.disconnect=function(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)},a.prototype.bindingConnected=function(a){this.unorderedBindings.add(a)},a.prototype.bindingDisconnected=function(a){this.unorderedBindings.delete(a)},a.prototype.handleEvent=function(d){for(var b=function(a){if(("immediatePropagationStopped"in a))return a;var b=a.stopImmediatePropagation;return Object.assign(a,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,b.call(this)}})}(d),a=0,c=this.bindings;a<c.length;a++){var e=c[a];if(b.immediatePropagationStopped)break;e.handleEvent(b)}},Object.defineProperty(a.prototype,"bindings",{get:function(){return Array.from(this.unorderedBindings).sort(function(c,d){var a=c.index,b=d.index;return a<b?-1:a>b?1:0})},enumerable:!1,configurable:!0}),a}(),h=function(){function a(a){this.application=a,this.eventListenerMaps=new Map,this.started=!1}return a.prototype.start=function(){this.started||(this.started=!0,this.eventListeners.forEach(function(a){return a.connect()}))},a.prototype.stop=function(){this.started&&(this.started=!1,this.eventListeners.forEach(function(a){return a.disconnect()}))},Object.defineProperty(a.prototype,"eventListeners",{get:function(){return Array.from(this.eventListenerMaps.values()).reduce(function(a,b){return a.concat(Array.from(b.values()))},[])},enumerable:!1,configurable:!0}),a.prototype.bindingConnected=function(a){this.fetchEventListenerForBinding(a).bindingConnected(a)},a.prototype.bindingDisconnected=function(a){this.fetchEventListenerForBinding(a).bindingDisconnected(a)},a.prototype.handleError=function(b,c,a){void 0===a&&(a={}),this.application.handleError(b,"Error "+c,a)},a.prototype.fetchEventListenerForBinding=function(a){var b=a.eventTarget,c=a.eventName,d=a.eventOptions;return this.fetchEventListener(b,c,d)},a.prototype.fetchEventListener=function(b,c,d){var e=this.fetchEventListenerMapForEventTarget(b),f=this.cacheKey(c,d),a=e.get(f);return a||(a=this.createEventListener(b,c,d),e.set(f,a)),a},a.prototype.createEventListener=function(b,c,d){var a=new g(b,c,d);return this.started&&a.connect(),a},a.prototype.fetchEventListenerMapForEventTarget=function(b){var a=this.eventListenerMaps.get(b);return a||(a=new Map,this.eventListenerMaps.set(b,a)),a},a.prototype.cacheKey=function(a,b){var c=[a];return Object.keys(b).sort().forEach(function(a){c.push((b[a]?"":"!")+a)}),c.join(":")},a}(),i=/^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/,j=function(){function a(b,c,a){this.element=b,this.index=c,this.eventTarget=a.eventTarget||b,this.eventName=a.eventName||function(a){var b=a.tagName.toLowerCase();if(b in k)return k[b](a)}(b)||l("missing event name"),this.eventOptions=a.eventOptions||{},this.identifier=a.identifier||l("missing identifier"),this.methodName=a.methodName||l("missing method name")}return a.forToken=function(b){var d,a,c;return new this(b.element,b.index,{eventTarget:"window"==(c=(a=(0,b.content).trim().match(i)||[])[4])?window:"document"==c?document:void 0,eventName:a[2],eventOptions:a[9]?(0,a[9]).split(":").reduce(function(c,a){var b;return Object.assign(c,((b={})[a.replace(/^!/,"")]=!/^!/.test(a),b))},{}):{},identifier:a[5],methodName:a[7]})},a.prototype.toString=function(){var a=this.eventTargetName?"@"+this.eventTargetName:"";return""+this.eventName+a+"->"+this.identifier+"#"+this.methodName},Object.defineProperty(a.prototype,"eventTargetName",{get:function(){var a;return(a=this.eventTarget)==window?"window":a==document?"document":void 0},enumerable:!1,configurable:!0}),a}(),k={a:function(a){return"click"},button:function(a){return"click"},form:function(a){return"submit"},input:function(a){return"submit"==a.getAttribute("type")?"click":"input"},select:function(a){return"change"},textarea:function(a){return"input"}};function l(a){throw new Error(a)}var m=function(){function a(a,b){this.context=a,this.action=b}return Object.defineProperty(a.prototype,"index",{get:function(){return this.action.index},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"eventTarget",{get:function(){return this.action.eventTarget},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"eventOptions",{get:function(){return this.action.eventOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!1,configurable:!0}),a.prototype.handleEvent=function(a){this.willBeInvokedByEvent(a)&&this.invokeWithEvent(a)},Object.defineProperty(a.prototype,"eventName",{get:function(){return this.action.eventName},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"method",{get:function(){var a=this.controller[this.methodName];if("function"==typeof a)return a;throw new Error('Action "'+this.action+'" references undefined method "'+this.methodName+'"')},enumerable:!1,configurable:!0}),a.prototype.invokeWithEvent=function(a){try{this.method.call(this.controller,a)}catch(b){var c={identifier:this.identifier,controller:this.controller,element:this.element,index:this.index,event:a};this.context.handleError(b,'invoking action "'+this.action+'"',c)}},a.prototype.willBeInvokedByEvent=function(b){var a=b.target;return this.element===a||(a instanceof Element&&this.element.contains(a)?this.scope.containsElement(a):this.scope.containsElement(this.action.element))},Object.defineProperty(a.prototype,"controller",{get:function(){return this.context.controller},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"methodName",{get:function(){return this.action.methodName},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scope",{get:function(){return this.context.scope},enumerable:!1,configurable:!0}),a}(),n=function(){function a(a,b){var c=this;this.element=a,this.started=!1,this.delegate=b,this.elements=new Set,this.mutationObserver=new MutationObserver(function(a){return c.processMutations(a)})}return a.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.refresh())},a.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},a.prototype.refresh=function(){if(this.started){for(var d=new Set(this.matchElementsInTree()),b=0,e=Array.from(this.elements);b<e.length;b++){var a=e[b];d.has(a)||this.removeElement(a)}for(var c=0,f=Array.from(d);c<f.length;c++)a=f[c],this.addElement(a)}},a.prototype.processMutations=function(c){if(this.started)for(var a=0,b=c;a<b.length;a++){var d=b[a];this.processMutation(d)}},a.prototype.processMutation=function(a){"attributes"==a.type?this.processAttributeChange(a.target,a.attributeName):"childList"==a.type&&(this.processRemovedNodes(a.removedNodes),this.processAddedNodes(a.addedNodes))},a.prototype.processAttributeChange=function(b,c){var a=b;this.elements.has(a)?this.delegate.elementAttributeChanged&&this.matchElement(a)?this.delegate.elementAttributeChanged(a,c):this.removeElement(a):this.matchElement(a)&&this.addElement(a)},a.prototype.processRemovedNodes=function(d){for(var a=0,b=Array.from(d);a<b.length;a++){var e=b[a],c=this.elementFromNode(e);c&&this.processTree(c,this.removeElement)}},a.prototype.processAddedNodes=function(d){for(var a=0,c=Array.from(d);a<c.length;a++){var e=c[a],b=this.elementFromNode(e);b&&this.elementIsActive(b)&&this.processTree(b,this.addElement)}},a.prototype.matchElement=function(a){return this.delegate.matchElement(a)},a.prototype.matchElementsInTree=function(a){return void 0===a&&(a=this.element),this.delegate.matchElementsInTree(a)},a.prototype.processTree=function(c,d){for(var a=0,b=this.matchElementsInTree(c);a<b.length;a++){var e=b[a];d.call(this,e)}},a.prototype.elementFromNode=function(a){if(a.nodeType==Node.ELEMENT_NODE)return a},a.prototype.elementIsActive=function(a){return a.isConnected==this.element.isConnected&&this.element.contains(a)},a.prototype.addElement=function(a){this.elements.has(a)||this.elementIsActive(a)&&(this.elements.add(a),this.delegate.elementMatched&&this.delegate.elementMatched(a))},a.prototype.removeElement=function(a){this.elements.has(a)&&(this.elements.delete(a),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(a))},a}(),o=function(){function a(a,b,c){this.attributeName=b,this.delegate=c,this.elementObserver=new n(a,this)}return Object.defineProperty(a.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!1,configurable:!0}),a.prototype.start=function(){this.elementObserver.start()},a.prototype.stop=function(){this.elementObserver.stop()},a.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(a.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!1,configurable:!0}),a.prototype.matchElement=function(a){return a.hasAttribute(this.attributeName)},a.prototype.matchElementsInTree=function(a){var b=this.matchElement(a)?[a]:[],c=Array.from(a.querySelectorAll(this.selector));return b.concat(c)},a.prototype.elementMatched=function(a){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(a,this.attributeName)},a.prototype.elementUnmatched=function(a){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(a,this.attributeName)},a.prototype.elementAttributeChanged=function(b,a){this.delegate.elementAttributeValueChanged&&this.attributeName==a&&this.delegate.elementAttributeValueChanged(b,a)},a}(),p=function(){function a(a,b){var c=this;this.element=a,this.delegate=b,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(function(a){return c.processMutations(a)})}return a.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0}),this.refresh())},a.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},a.prototype.refresh=function(){if(this.started)for(var a=0,b=this.knownAttributeNames;a<b.length;a++){var c=b[a];this.refreshAttribute(c)}},a.prototype.processMutations=function(c){if(this.started)for(var a=0,b=c;a<b.length;a++){var d=b[a];this.processMutation(d)}},a.prototype.processMutation=function(b){var a=b.attributeName;a&&this.refreshAttribute(a)},a.prototype.refreshAttribute=function(a){var b=this.delegate.getStringMapKeyForAttribute(a);if(null!=b){this.stringMap.has(a)||this.stringMapKeyAdded(b,a);var c=this.element.getAttribute(a);this.stringMap.get(a)!=c&&this.stringMapValueChanged(c,b),null==c?(this.stringMap.delete(a),this.stringMapKeyRemoved(b,a)):this.stringMap.set(a,c)}},a.prototype.stringMapKeyAdded=function(a,b){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(a,b)},a.prototype.stringMapValueChanged=function(a,b){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(a,b)},a.prototype.stringMapKeyRemoved=function(a,b){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(a,b)},Object.defineProperty(a.prototype,"knownAttributeNames",{get:function(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentAttributeNames",{get:function(){return Array.from(this.element.attributes).map(function(a){return a.name})},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"recordedAttributeNames",{get:function(){return Array.from(this.stringMap.keys())},enumerable:!1,configurable:!0}),a}();function q(a,b,c){s(a,b).add(c)}function r(c,d,f){var a,b,e;s(c,d).delete(f),a=c,b=d,null!=(e=a.get(b))&&0==e.size&&a.delete(b)}function s(b,c){var a=b.get(c);return a||(a=new Set,b.set(c,a)),a}var c,d=function(){function a(){this.valuesByKey=new Map}return Object.defineProperty(a.prototype,"values",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(a,b){return a.concat(Array.from(b))},[])},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(a,b){return a+b.size},0)},enumerable:!1,configurable:!0}),a.prototype.add=function(a,b){q(this.valuesByKey,a,b)},a.prototype.delete=function(a,b){r(this.valuesByKey,a,b)},a.prototype.has=function(b,c){var a=this.valuesByKey.get(b);return null!=a&&a.has(c)},a.prototype.hasKey=function(a){return this.valuesByKey.has(a)},a.prototype.hasValue=function(a){return Array.from(this.valuesByKey.values()).some(function(b){return b.has(a)})},a.prototype.getValuesForKey=function(b){var a=this.valuesByKey.get(b);return a?Array.from(a):[]},a.prototype.getKeysForValue=function(a){return Array.from(this.valuesByKey).filter(function(b){return b[0],b[1].has(a)}).map(function(a){var b=a[0];return a[1],b})},a}(),t=this&&this.__extends||(c=function(a,b){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])})(a,b)},function(b,a){function d(){this.constructor=b}c(b,a),b.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}),u=(function(b){function a(){var a=b.call(this)||this;return a.keysByValue=new Map,a}t(a,b),Object.defineProperty(a.prototype,"values",{get:function(){return Array.from(this.keysByValue.keys())},enumerable:!1,configurable:!0}),a.prototype.add=function(a,c){b.prototype.add.call(this,a,c),q(this.keysByValue,c,a)},a.prototype.delete=function(a,c){b.prototype.delete.call(this,a,c),r(this.keysByValue,c,a)},a.prototype.hasValue=function(a){return this.keysByValue.has(a)},a.prototype.getKeysForValue=function(b){var a=this.keysByValue.get(b);return a?Array.from(a):[]}}(d),function(){function a(a,b,c){this.attributeObserver=new o(a,b,this),this.delegate=c,this.tokensByElement=new d}return Object.defineProperty(a.prototype,"started",{get:function(){return this.attributeObserver.started},enumerable:!1,configurable:!0}),a.prototype.start=function(){this.attributeObserver.start()},a.prototype.stop=function(){this.attributeObserver.stop()},a.prototype.refresh=function(){this.attributeObserver.refresh()},Object.defineProperty(a.prototype,"element",{get:function(){return this.attributeObserver.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"attributeName",{get:function(){return this.attributeObserver.attributeName},enumerable:!1,configurable:!0}),a.prototype.elementMatchedAttribute=function(a){this.tokensMatched(this.readTokensForElement(a))},a.prototype.elementAttributeValueChanged=function(b){var a=this.refreshTokensForElement(b),c=a[0],d=a[1];this.tokensUnmatched(c),this.tokensMatched(d)},a.prototype.elementUnmatchedAttribute=function(a){this.tokensUnmatched(this.tokensByElement.getValuesForKey(a))},a.prototype.tokensMatched=function(a){var b=this;a.forEach(function(a){return b.tokenMatched(a)})},a.prototype.tokensUnmatched=function(a){var b=this;a.forEach(function(a){return b.tokenUnmatched(a)})},a.prototype.tokenMatched=function(a){this.delegate.tokenMatched(a),this.tokensByElement.add(a.element,a)},a.prototype.tokenUnmatched=function(a){this.delegate.tokenUnmatched(a),this.tokensByElement.delete(a.element,a)},a.prototype.refreshTokensForElement=function(b){var c,d,e,f=this.tokensByElement.getValuesForKey(b),g=this.readTokensForElement(b),a=(c=f,d=g,e=Math.max(c.length,d.length),Array.from({length:e},function(b,a){return[c[a],d[a]]})).findIndex(function(c){var b,a,d=c[0],e=c[1];return a=e,!((b=d)&&a&&b.index==a.index&&b.content==a.content)});return -1==a?[[],[]]:[f.slice(a),g.slice(a)]},a.prototype.readTokensForElement=function(a){var b,d,e,c=this.attributeName;return b=a.getAttribute(c)||"",d=a,e=c,b.trim().split(/\s+/).filter(function(a){return a.length}).map(function(a,b){return{element:d,attributeName:e,content:a,index:b}})},a}()),v=function(){function a(a,b,c){this.tokenListObserver=new u(a,b,this),this.delegate=c,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}return Object.defineProperty(a.prototype,"started",{get:function(){return this.tokenListObserver.started},enumerable:!1,configurable:!0}),a.prototype.start=function(){this.tokenListObserver.start()},a.prototype.stop=function(){this.tokenListObserver.stop()},a.prototype.refresh=function(){this.tokenListObserver.refresh()},Object.defineProperty(a.prototype,"element",{get:function(){return this.tokenListObserver.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"attributeName",{get:function(){return this.tokenListObserver.attributeName},enumerable:!1,configurable:!0}),a.prototype.tokenMatched=function(a){var c=a.element,b=this.fetchParseResultForToken(a).value;b&&(this.fetchValuesByTokenForElement(c).set(a,b),this.delegate.elementMatchedValue(c,b))},a.prototype.tokenUnmatched=function(a){var b=a.element,c=this.fetchParseResultForToken(a).value;c&&(this.fetchValuesByTokenForElement(b).delete(a),this.delegate.elementUnmatchedValue(b,c))},a.prototype.fetchParseResultForToken=function(b){var a=this.parseResultsByToken.get(b);return a||(a=this.parseToken(b),this.parseResultsByToken.set(b,a)),a},a.prototype.fetchValuesByTokenForElement=function(b){var a=this.valuesByTokenByElement.get(b);return a||(a=new Map,this.valuesByTokenByElement.set(b,a)),a},a.prototype.parseToken=function(a){try{return{value:this.delegate.parseValueForToken(a)}}catch(b){return{error:b}}},a}(),w=function(){function a(a,b){this.context=a,this.delegate=b,this.bindingsByAction=new Map}return a.prototype.start=function(){this.valueListObserver||(this.valueListObserver=new v(this.element,this.actionAttribute,this),this.valueListObserver.start())},a.prototype.stop=function(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())},Object.defineProperty(a.prototype,"element",{get:function(){return this.context.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"actionAttribute",{get:function(){return this.schema.actionAttribute},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"schema",{get:function(){return this.context.schema},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bindings",{get:function(){return Array.from(this.bindingsByAction.values())},enumerable:!1,configurable:!0}),a.prototype.connectAction=function(a){var b=new m(this.context,a);this.bindingsByAction.set(a,b),this.delegate.bindingConnected(b)},a.prototype.disconnectAction=function(a){var b=this.bindingsByAction.get(a);b&&(this.bindingsByAction.delete(a),this.delegate.bindingDisconnected(b))},a.prototype.disconnectAllActions=function(){var a=this;this.bindings.forEach(function(b){return a.delegate.bindingDisconnected(b)}),this.bindingsByAction.clear()},a.prototype.parseValueForToken=function(b){var a=j.forToken(b);if(a.identifier==this.identifier)return a},a.prototype.elementMatchedValue=function(b,a){this.connectAction(a)},a.prototype.elementUnmatchedValue=function(b,a){this.disconnectAction(a)},a}(),x=function(){function a(a,b){this.context=a,this.receiver=b,this.stringMapObserver=new p(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap,this.invokeChangedCallbacksForDefaultValues()}return a.prototype.start=function(){this.stringMapObserver.start()},a.prototype.stop=function(){this.stringMapObserver.stop()},Object.defineProperty(a.prototype,"element",{get:function(){return this.context.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"controller",{get:function(){return this.context.controller},enumerable:!1,configurable:!0}),a.prototype.getStringMapKeyForAttribute=function(a){if(a in this.valueDescriptorMap)return this.valueDescriptorMap[a].name},a.prototype.stringMapValueChanged=function(b,a){this.invokeChangedCallbackForValue(a)},a.prototype.invokeChangedCallbacksForDefaultValues=function(){for(var a=0,c=this.valueDescriptors;a<c.length;a++){var b=c[a],d=b.key,e=b.name;void 0==b.defaultValue||this.controller.data.has(d)||this.invokeChangedCallbackForValue(e)}},a.prototype.invokeChangedCallbackForValue=function(a){var b=this.receiver[a+"Changed"];if("function"==typeof b){var c=this.receiver[a];b.call(this.receiver,c)}},Object.defineProperty(a.prototype,"valueDescriptors",{get:function(){var a=this.valueDescriptorMap;return Object.keys(a).map(function(b){return a[b]})},enumerable:!1,configurable:!0}),a}(),_=function(){function a(a,b){this.module=a,this.scope=b,this.controller=new a.controllerConstructor(this),this.bindingObserver=new w(this,this.dispatcher),this.valueObserver=new x(this,this.controller);try{this.controller.initialize()}catch(c){this.handleError(c,"initializing controller")}}return a.prototype.connect=function(){this.bindingObserver.start(),this.valueObserver.start();try{this.controller.connect()}catch(a){this.handleError(a,"connecting controller")}},a.prototype.disconnect=function(){try{this.controller.disconnect()}catch(a){this.handleError(a,"disconnecting controller")}this.valueObserver.stop(),this.bindingObserver.stop()},Object.defineProperty(a.prototype,"application",{get:function(){return this.module.application},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"identifier",{get:function(){return this.module.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"schema",{get:function(){return this.application.schema},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dispatcher",{get:function(){return this.application.dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"parentElement",{get:function(){return this.element.parentElement},enumerable:!1,configurable:!0}),a.prototype.handleError=function(b,c,a){void 0===a&&(a={});var d=this.identifier,e=this.controller,f=this.element;a=Object.assign({identifier:d,controller:e,element:f},a),this.application.handleError(b,"Error "+c,a)},a}();function y(a,c){var b=z(a);return Array.from(b.reduce(function(b,d){var e,f,a;return(a=(e=d)[c],Array.isArray(a)?a:[]).forEach(function(a){return b.add(a)}),b},new Set))}function z(a){for(var b=[];a;)b.push(a),a=Object.getPrototypeOf(a);return b.reverse()}var e,A=this&&this.__extends||(e=function(a,b){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])})(a,b)},function(b,a){function c(){this.constructor=b}e(b,a),b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}),B=this&&this.__spreadArrays||function(){for(var c=0,a=0,d=arguments.length;a<d;a++)c+=arguments[a].length;var e=Array(c),f=0;for(a=0;a<d;a++)for(var g=arguments[a],b=0,h=g.length;b<h;b++,f++)e[f]=g[b];return e},C="function"==typeof Object.getOwnPropertySymbols?function(a){return B(Object.getOwnPropertyNames(a),Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,D=function(){var a;function b(b){function a(){var c=this&&this instanceof a?this.constructor:void 0;return Reflect.construct(b,arguments,c)}return a.prototype=Object.create(b.prototype,{constructor:{value:a}}),Reflect.setPrototypeOf(a,b),a}try{return(a=b(function(){this.a.call(this)})).prototype.a=function(){},new a,b}catch(c){return function(a){return function(b){function a(){return null!==b&&b.apply(this,arguments)||this}return A(a,b),a}(a)}}}(),E=function(){function a(g,h){var c,d,i,a,e,j,k,b,f;this.application=g,this.definition={identifier:(c=h).identifier,controllerConstructor:(a=d=c.controllerConstructor,e=y(i=d,"blessings").reduce(function(a,d){var c=d(i);for(var b in c){var e=a[b]||{};a[b]=Object.assign(e,c[b])}return a},{}),b=D(a),f=(j=a.prototype,C(k=e).reduce(function(a,b){var c,d=function(d,e,c){var a=Object.getOwnPropertyDescriptor(d,c);if(!(a&&"value"in a)){var b=Object.getOwnPropertyDescriptor(e,c).value;return a&&(b.get=a.get||b.get,b.set=a.set||b.set),b}}(j,k,b);return d&&Object.assign(a,((c={})[b]=d,c)),a},{})),Object.defineProperties(b.prototype,f),b)},this.contextsByScope=new WeakMap,this.connectedContexts=new Set}return Object.defineProperty(a.prototype,"identifier",{get:function(){return this.definition.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"controllerConstructor",{get:function(){return this.definition.controllerConstructor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"contexts",{get:function(){return Array.from(this.connectedContexts)},enumerable:!1,configurable:!0}),a.prototype.connectContextForScope=function(b){var a=this.fetchContextForScope(b);this.connectedContexts.add(a),a.connect()},a.prototype.disconnectContextForScope=function(b){var a=this.contextsByScope.get(b);a&&(this.connectedContexts.delete(a),a.disconnect())},a.prototype.fetchContextForScope=function(b){var a=this.contextsByScope.get(b);return a||(a=new _(this,b),this.contextsByScope.set(b,a)),a},a}(),F=function(){function a(a){this.scope=a}return a.prototype.has=function(a){return this.data.has(this.getDataKey(a))},a.prototype.get=function(a){return this.data.get(this.getDataKey(a))},a.prototype.getAttributeName=function(a){return this.data.getAttributeNameForKey(this.getDataKey(a))},a.prototype.getDataKey=function(a){return a+"-class"},Object.defineProperty(a.prototype,"data",{get:function(){return this.scope.data},enumerable:!1,configurable:!0}),a}();function G(a){return a.charAt(0).toUpperCase()+a.slice(1)}function H(a){return a.replace(/([A-Z])/g,function(b,a){return"-"+a.toLowerCase()})}var I=function(){function a(a){this.scope=a}return Object.defineProperty(a.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!1,configurable:!0}),a.prototype.get=function(a){var b=this.getAttributeNameForKey(a);return this.element.getAttribute(b)},a.prototype.set=function(a,b){var c=this.getAttributeNameForKey(a);return this.element.setAttribute(c,b),this.get(a)},a.prototype.has=function(a){var b=this.getAttributeNameForKey(a);return this.element.hasAttribute(b)},a.prototype.delete=function(a){if(this.has(a)){var b=this.getAttributeNameForKey(a);return this.element.removeAttribute(b),!0}return!1},a.prototype.getAttributeNameForKey=function(a){return"data-"+this.identifier+"-"+H(a)},a}(),J=function(){function a(a){this.warnedKeysByObject=new WeakMap,this.logger=a}return a.prototype.warn=function(b,c,d){var a=this.warnedKeysByObject.get(b);a||(a=new Set,this.warnedKeysByObject.set(b,a)),a.has(c)||(a.add(c),this.logger.warn(d,b))},a}();function K(a,b){return"["+a+'~="'+b+'"]'}var L=this&&this.__spreadArrays||function(){for(var c=0,a=0,d=arguments.length;a<d;a++)c+=arguments[a].length;var e=Array(c),f=0;for(a=0;a<d;a++)for(var g=arguments[a],b=0,h=g.length;b<h;b++,f++)e[f]=g[b];return e},M=function(){function a(a){this.scope=a}return Object.defineProperty(a.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"schema",{get:function(){return this.scope.schema},enumerable:!1,configurable:!0}),a.prototype.has=function(a){return null!=this.find(a)},a.prototype.find=function(){for(var c=this,b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];return b.reduce(function(b,a){return b||c.findTarget(a)||c.findLegacyTarget(a)},void 0)},a.prototype.findAll=function(){for(var c=this,b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];return b.reduce(function(b,a){return L(b,c.findAllTargets(a),c.findAllLegacyTargets(a))},[])},a.prototype.findTarget=function(a){var b=this.getSelectorForTargetName(a);return this.scope.findElement(b)},a.prototype.findAllTargets=function(a){var b=this.getSelectorForTargetName(a);return this.scope.findAllElements(b)},a.prototype.getSelectorForTargetName=function(a){return K("data-"+this.identifier+"-target",a)},a.prototype.findLegacyTarget=function(a){var b=this.getLegacySelectorForTargetName(a);return this.deprecate(this.scope.findElement(b),a)},a.prototype.findAllLegacyTargets=function(a){var c=this,b=this.getLegacySelectorForTargetName(a);return this.scope.findAllElements(b).map(function(b){return c.deprecate(b,a)})},a.prototype.getLegacySelectorForTargetName=function(a){var b=this.identifier+"."+a;return K(this.schema.targetAttribute,b)},a.prototype.deprecate=function(a,b){if(a){var c=this.identifier,d=this.schema.targetAttribute;this.guide.warn(a,"target:"+b,"Please replace "+d+'="'+c+"."+b+'" with data-'+c+'-target="'+b+'". The '+d+" attribute is deprecated and will be removed in a future version of Stimulus.")}return a},Object.defineProperty(a.prototype,"guide",{get:function(){return this.scope.guide},enumerable:!1,configurable:!0}),a}(),N=this&&this.__spreadArrays||function(){for(var c=0,a=0,d=arguments.length;a<d;a++)c+=arguments[a].length;var e=Array(c),f=0;for(a=0;a<d;a++)for(var g=arguments[a],b=0,h=g.length;b<h;b++,f++)e[f]=g[b];return e},O=function(){function a(a,b,c,d){var e=this;this.targets=new M(this),this.classes=new F(this),this.data=new I(this),this.containsElement=function(a){return a.closest(e.controllerSelector)===e.element},this.schema=a,this.element=b,this.identifier=c,this.guide=new J(d)}return a.prototype.findElement=function(a){return this.element.matches(a)?this.element:this.queryElements(a).find(this.containsElement)},a.prototype.findAllElements=function(a){return N(this.element.matches(a)?[this.element]:[],this.queryElements(a).filter(this.containsElement))},a.prototype.queryElements=function(a){return Array.from(this.element.querySelectorAll(a))},Object.defineProperty(a.prototype,"controllerSelector",{get:function(){return K(this.schema.controllerAttribute,this.identifier)},enumerable:!1,configurable:!0}),a}(),P=function(){function a(a,b,c){this.element=a,this.schema=b,this.delegate=c,this.valueListObserver=new v(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}return a.prototype.start=function(){this.valueListObserver.start()},a.prototype.stop=function(){this.valueListObserver.stop()},Object.defineProperty(a.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!1,configurable:!0}),a.prototype.parseValueForToken=function(c){var d=c.element,b=c.content,e=this.fetchScopesByIdentifierForElement(d),a=e.get(b);return a||(a=this.delegate.createScopeForElementAndIdentifier(d,b),e.set(b,a)),a},a.prototype.elementMatchedValue=function(c,a){var b=(this.scopeReferenceCounts.get(a)||0)+1;this.scopeReferenceCounts.set(a,b),1==b&&this.delegate.scopeConnected(a)},a.prototype.elementUnmatchedValue=function(c,a){var b=this.scopeReferenceCounts.get(a);b&&(this.scopeReferenceCounts.set(a,b-1),1==b&&this.delegate.scopeDisconnected(a))},a.prototype.fetchScopesByIdentifierForElement=function(b){var a=this.scopesByIdentifierByElement.get(b);return a||(a=new Map,this.scopesByIdentifierByElement.set(b,a)),a},a}(),Q=function(){function a(a){this.application=a,this.scopeObserver=new P(this.element,this.schema,this),this.scopesByIdentifier=new d,this.modulesByIdentifier=new Map}return Object.defineProperty(a.prototype,"element",{get:function(){return this.application.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"schema",{get:function(){return this.application.schema},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"logger",{get:function(){return this.application.logger},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"modules",{get:function(){return Array.from(this.modulesByIdentifier.values())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"contexts",{get:function(){return this.modules.reduce(function(a,b){return a.concat(b.contexts)},[])},enumerable:!1,configurable:!0}),a.prototype.start=function(){this.scopeObserver.start()},a.prototype.stop=function(){this.scopeObserver.stop()},a.prototype.loadDefinition=function(a){this.unloadIdentifier(a.identifier);var b=new E(this.application,a);this.connectModule(b)},a.prototype.unloadIdentifier=function(b){var a=this.modulesByIdentifier.get(b);a&&this.disconnectModule(a)},a.prototype.getContextForElementAndIdentifier=function(c,b){var a=this.modulesByIdentifier.get(b);if(a)return a.contexts.find(function(a){return a.element==c})},a.prototype.handleError=function(a,b,c){this.application.handleError(a,b,c)},a.prototype.createScopeForElementAndIdentifier=function(a,b){return new O(this.schema,a,b,this.logger)},a.prototype.scopeConnected=function(a){this.scopesByIdentifier.add(a.identifier,a);var b=this.modulesByIdentifier.get(a.identifier);b&&b.connectContextForScope(a)},a.prototype.scopeDisconnected=function(a){this.scopesByIdentifier.delete(a.identifier,a);var b=this.modulesByIdentifier.get(a.identifier);b&&b.disconnectContextForScope(a)},a.prototype.connectModule=function(a){this.modulesByIdentifier.set(a.identifier,a),this.scopesByIdentifier.getValuesForKey(a.identifier).forEach(function(b){return a.connectContextForScope(b)})},a.prototype.disconnectModule=function(a){this.modulesByIdentifier.delete(a.identifier),this.scopesByIdentifier.getValuesForKey(a.identifier).forEach(function(b){return a.disconnectContextForScope(b)})},a}(),R={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target"},S=this&&this.__awaiter||function(b,c,a,d){return new(a||(a=Promise))(function(f,g){function h(a){try{e(d.next(a))}catch(b){g(b)}}function i(a){try{e(d.throw(a))}catch(b){g(b)}}function e(b){var c;b.done?f(b.value):((c=b.value)instanceof a?c:new a(function(a){a(c)})).then(h,i)}e((d=d.apply(b,c||[])).next())})},$=this&&this.__generator||function(b,c){var d,e,f,a,g={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return a={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function h(a){return function(h){return function(a){if(d)throw new TypeError("Generator is already executing.");for(;g;)try{if(d=1,e&&(f=2&a[0]?e.return:a[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,a[1])).done)return f;switch(e=0,f&&(a=[2&a[0],f.value]),a[0]){case 0:case 1:f=a;break;case 4:return g.label++,{value:a[1],done:!1};case 5:g.label++,e=a[1],a=[0];continue;case 7:a=g.ops.pop(),g.trys.pop();continue;default:if(!(f=(f=g.trys).length>0&&f[f.length-1])&&(6===a[0]||2===a[0])){g=0;continue}if(3===a[0]&&(!f||a[1]>f[0]&&a[1]<f[3])){g.label=a[1];break}if(6===a[0]&&g.label<f[1]){g.label=f[1],f=a;break}if(f&&g.label<f[2]){g.label=f[2],g.ops.push(a);break}f[2]&&g.ops.pop(),g.trys.pop();continue}a=c.call(b,g)}catch(h){a=[6,h],e=0}finally{d=f=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}},T=this&&this.__spreadArrays||function(){for(var c=0,a=0,d=arguments.length;a<d;a++)c+=arguments[a].length;var e=Array(c),f=0;for(a=0;a<d;a++)for(var g=arguments[a],b=0,h=g.length;b<h;b++,f++)e[f]=g[b];return e},U=function(){function a(a,b){void 0===a&&(a=document.documentElement),void 0===b&&(b=R),this.logger=console,this.element=a,this.schema=b,this.dispatcher=new h(this),this.router=new Q(this)}return a.start=function(c,d){var b=new a(c,d);return b.start(),b},a.prototype.start=function(){return S(this,void 0,void 0,function(){return $(this,function(a){switch(a.label){case 0:return[4,new Promise(function(a){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",a):a()})];case 1:return a.sent(),this.dispatcher.start(),this.router.start(),[2]}})})},a.prototype.stop=function(){this.dispatcher.stop(),this.router.stop()},a.prototype.register=function(a,b){this.load({identifier:a,controllerConstructor:b})},a.prototype.load=function(b){for(var d=this,c=[],a=1;a<arguments.length;a++)c[a-1]=arguments[a];(Array.isArray(b)?b:T([b],c)).forEach(function(a){return d.router.loadDefinition(a)})},a.prototype.unload=function(b){for(var d=this,c=[],a=1;a<arguments.length;a++)c[a-1]=arguments[a];(Array.isArray(b)?b:T([b],c)).forEach(function(a){return d.router.unloadIdentifier(a)})},Object.defineProperty(a.prototype,"controllers",{get:function(){return this.router.contexts.map(function(a){return a.controller})},enumerable:!1,configurable:!0}),a.prototype.getControllerForElementAndIdentifier=function(b,c){var a=this.router.getContextForElementAndIdentifier(b,c);return a?a.controller:null},a.prototype.handleError=function(a,b,c){this.logger.error("%s\n\n%o\n\n%o",b,a,c)},a}();function V(a){return y(a,"classes").reduce(function(c,d){var e,a,b;return Object.assign(c,((a={})[b=(e=d)+"Class"]={get:function(){var a=this.classes;if(a.has(e))return a.get(e);var b=a.getAttributeName(e);throw new Error('Missing attribute "'+b+'"')}},a["has"+G(b)]={get:function(){return this.classes.has(e)}},a))},{})}function W(a){return y(a,"targets").reduce(function(c,d){var b,a;return Object.assign(c,((a={})[(b=d)+"Target"]={get:function(){var a=this.targets.find(b);if(a)return a;throw new Error('Missing target element "'+this.identifier+"."+b+'"')}},a[b+"Targets"]={get:function(){return this.targets.findAll(b)}},a["has"+G(b)+"Target"]={get:function(){return this.targets.has(b)}},a))},{})}function X(a){var d,b,c=(b="values",z(a).reduce(function(a,d){var e,f,c;return a.push.apply(a,(c=(e=d)[b])?Object.keys(c).map(function(a){return[a,c[a]]}):[]),a},[]));return c.reduce(function(e,f){var j,a,b,c,g,d,h,i;return Object.assign(e,(c=(b=Y(f)).type,g=b.key,d=b.name,h=aa[c],i=ab[c]||ab.default,(a={})[d]={get:function(){var a=this.data.get(g);return null!==a?h(a):b.defaultValue},set:function(a){void 0===a?this.data.delete(g):this.data.set(g,i(a))}},a["has"+G(d)]={get:function(){return this.data.has(g)}},a))},{valueDescriptorMap:{get:function(){var a=this;return c.reduce(function(d,e){var b,c=Y(e),f=a.data.getAttributeNameForKey(c.key);return Object.assign(d,((b={})[f]=c,b))},{})}}})}function Y(c){var d,a,b;return d=c[0],a=function(a){switch(a){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}throw new Error('Unknown value type constant "'+a+'"')}(c[1]),b=H(d)+"-value",{type:a,key:b,name:b.replace(/(?:[_-])([a-z0-9])/g,function(b,a){return a.toUpperCase()}),get defaultValue(){return Z[a]}}}var Z={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},aa={array:function(b){var a=JSON.parse(b);if(!Array.isArray(a))throw new TypeError("Expected array");return a},boolean:function(a){return!("0"==a||"false"==a)},number:function(a){return parseFloat(a)},object:function(b){var a=JSON.parse(b);if(null===a||"object"!=typeof a||Array.isArray(a))throw new TypeError("Expected object");return a},string:function(a){return a}},ab={default:function(a){return""+a},array:ac,object:ac};function ac(a){return JSON.stringify(a)}var ad=function(){function a(a){this.context=a}return Object.defineProperty(a.prototype,"application",{get:function(){return this.context.application},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scope",{get:function(){return this.context.scope},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"targets",{get:function(){return this.scope.targets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"classes",{get:function(){return this.scope.classes},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.scope.data},enumerable:!1,configurable:!0}),a.prototype.initialize=function(){},a.prototype.connect=function(){},a.prototype.disconnect=function(){},a.blessings=[V,W,X],a.targets=[],a.values={},a}();b.d(a,"Application",function(){return U}),b.d(a,"Context",function(){return _}),b.d(a,"Controller",function(){return ad}),b.d(a,"defaultSchema",function(){return R})},function(c,a,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return e(a,null,[{key:"remove_all",value:function(){this.elements.forEach(function(a){document.getElementById(a).removeAttribute("required")})}},{key:"enable_for_required_email",value:function(){this.remove_all(),document.getElementById("required_email_field").setAttribute("required",!0)}},{key:"enable_for_send_invoice",value:function(){this.remove_all(),document.getElementById("invoice_recipient_email").setAttribute("required",!0),document.getElementById("invoice_sender_email").setAttribute("required",!0),document.getElementById("invoice_email_message").setAttribute("required",!0)}}]),a}();b.elements=["required_email_field","invoice_recipient_email","invoice_sender_email","invoice_email_message"],a.RequiredInputFields=b},function(a,b,c){var d;!function(i){"use strict";var f,h="[big.js] ",g=h+"Invalid ",j=g+"decimal places",k=g+"rounding mode",e={},l=void 0,m=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function n(e,f,c,d){var a=e.c,b=e.e+f+1;if(b<a.length){if(1===c)d=a[b]>=5;else if(2===c)d=a[b]>5||5==a[b]&&(d||b<0||a[b+1]!==l||1&a[b-1]);else if(3===c)d=d||a[b]!==l||b<0;else if(d=!1,0!==c)throw Error(k);if(b<1)a.length=1,d?(e.e=-f,a[0]=1):a[0]=e.e=0;else{if(a.length=b--,d)for(;++a[b]>9;)a[b]=0,(b--)||(++e.e,a.unshift(1));for(b=a.length;!a[--b];)a.pop()}}else if(c<0||c>3||c!== ~~c)throw Error(k);return e}function o(d,e,c,f){var b,a,h=d.constructor,i=!d.c[0];if(c!==l){if(c!== ~~c||c<(3==e)||c>1e6)throw Error(3==e?g+"precision":j);for(c=f-(d=new h(d)).e,d.c.length> ++f&&n(d,c,h.RM),2==e&&(f=d.e+c+1);d.c.length<f;)d.c.push(0)}if(b=d.e,c=(a=d.c.join("")).length,2!=e&&(1==e||3==e&&f<=b||b<=h.NE||b>=h.PE))a=a.charAt(0)+(c>1?"."+a.slice(1):"")+(b<0?"e":"e+")+b;else if(b<0){for(;++b;)a="0"+a;a="0."+a}else if(b>0){if(++b>c)for(b-=c;b--;)a+="0";else b<c&&(a=a.slice(0,b)+"."+a.slice(b))}else c>1&&(a=a.charAt(0)+"."+a.slice(1));return d.s<0&&(!i||4==e)?"-"+a:a}e.abs=function(){var a=new this.constructor(this);return a.s=1,a},e.cmp=function(f){var g,h=this,d=h.c,e=(f=new h.constructor(f)).c,a=h.s,i=f.s,b=h.e,c=f.e;if(!d[0]||!e[0])return d[0]?a:e[0]?-i:0;if(a!=i)return a;if(g=a<0,b!=c)return b>c^g?1:-1;for(i=(b=d.length)<(c=e.length)?b:c,a=-1;++a<i;)if(d[a]!=e[a])return d[a]>e[a]^g?1:-1;return b==c?0:b>c^g?1:-1},e.div=function(i){var o=this,p=o.constructor,k=o.c,e=(i=new p(i)).c,q=o.s==i.s?1:-1,f=p.DP;if(f!== ~~f||f<0||f>1e6)throw Error(j);if(!e[0])throw Error("[big.js] Division by zero");if(!k[0])return new p(0*q);var d,r,m,g,c,v=e.slice(),s=d=e.length,w=k.length,a=k.slice(0,d),b=a.length,h=i,t=h.c=[],u=0,_=f+(h.e=o.e-i.e)+1;for(h.s=q,q=_<0?0:_,v.unshift(0);(b++)<d;)a.push(0);do{for(m=0;m<10;m++){if(d!=(b=a.length))g=d>b?1:-1;else for(c=-1,g=0;++c<d;)if(e[c]!=a[c]){g=e[c]>a[c]?1:-1;break}if(!(g<0))break;for(r=b==d?e:v;b;){if(a[--b]<r[b]){for(c=b;c&&!a[--c];)a[c]=9;--a[c],a[b]+=10}a[b]-=r[b]}for(;!a[0];)a.shift()}t[u++]=g?m:++m,a[0]&&g?a[b]=k[s]||0:a=[k[s]]}while(((s++)<w||a[0]!==l)&&q--)return t[0]||1==u||(t.shift(),h.e--),u>_&&n(h,f,p.RM,a[0]!==l),h},e.eq=function(a){return!this.cmp(a)},e.gt=function(a){return this.cmp(a)>0},e.gte=function(a){return this.cmp(a)> -1},e.lt=function(a){return 0>this.cmp(a)},e.lte=function(a){return 1>this.cmp(a)},e.minus=e.sub=function(c){var f,e,h,k,i=this,l=i.constructor,g=i.s,b=(c=new l(c)).s;if(g!=b)return c.s=-b,i.plus(c);var a=i.c.slice(),m=i.e,d=c.c,j=c.e;if(!a[0]||!d[0])return d[0]?(c.s=-b,c):new l(a[0]?i:0);if(g=m-j){for((k=g<0)?(g=-g,h=a):(j=m,h=d),h.reverse(),b=g;b--;)h.push(0);h.reverse()}else for(e=((k=a.length<d.length)?a:d).length,g=b=0;b<e;b++)if(a[b]!=d[b]){k=a[b]<d[b];break}if(k&&(h=a,a=d,d=h,c.s=-c.s),(b=(e=d.length)-(f=a.length))>0)for(;b--;)a[f++]=0;for(b=f;e>g;){if(a[--e]<d[e]){for(f=e;f&&!a[--f];)a[f]=9;--a[f],a[e]+=10}a[e]-=d[e]}for(;0===a[--b];)a.pop();for(;0===a[0];)a.shift(),--j;return a[0]||(c.s=1,a=[j=0]),c.c=a,c.e=j,c},e.mod=function(b){var f,a=this,c=a.constructor,d=a.s,e=(b=new c(b)).s;if(!b.c[0])throw Error("[big.js] Division by zero");return a.s=b.s=1,f=1==b.cmp(a),a.s=d,b.s=e,f?new c(a):(d=c.DP,e=c.RM,c.DP=c.RM=0,a=a.div(b),c.DP=d,c.RM=e,this.minus(a.times(b)))},e.plus=e.add=function(c){var e,g=this,i=g.constructor,b=g.s,f=(c=new i(c)).s;if(b!=f)return c.s=-f,g.minus(c);var j=g.e,a=g.c,h=c.e,d=c.c;if(!a[0]||!d[0])return d[0]?c:new i(a[0]?g:0*b);if(a=a.slice(),b=j-h){for(b>0?(h=j,e=d):(b=-b,e=a),e.reverse();b--;)e.push(0);e.reverse()}for(a.length-d.length<0&&(e=d,d=a,a=e),b=d.length,f=0;b;a[b]%=10)f=(a[--b]=a[b]+d[b]+f)/10|0;for(f&&(a.unshift(f),++h),b=a.length;0===a[--b];)a.pop();return c.c=a,c.e=h,c},e.pow=function(a){var b=this,d=new b.constructor(1),c=d,e=a<0;if(a!== ~~a||a< -1e6||a>1e6)throw Error(g+"exponent");for(e&&(a=-a);1&a&&(c=c.times(b)),a>>=1;)b=b.times(b);return e?d.div(c):c},e.round=function(a,b){var c=this.constructor;if(a===l)a=0;else if(a!== ~~a||a<0||a>1e6)throw Error(j);return n(new c(this),a,b===l?c.RM:b)},e.sqrt=function(){var b,g,e,a=this,c=a.constructor,f=a.s,d=a.e,i=new c(.5);if(!a.c[0])return new c(a);if(f<0)throw Error(h+"No square root");0===(f=Math.sqrt(a.toString()))||f===1/0?((g=a.c.join("")).length+d&1||(g+="0"),(b=new c(Math.sqrt(g).toString())).e=((d+1)/2|0)-(d<0||1&d)):b=new c(f.toString()),d=b.e+(c.DP+=4);do e=b,b=i.times(e.plus(a.div(e)));while(e.c.slice(0,d).join("")!==b.c.slice(0,d).join(""))return n(b,c.DP-=4,c.RM)},e.times=e.mul=function(d){var a,i=this,j=i.constructor,f=i.c,g=(d=new j(d)).c,h=f.length,b=g.length,e=i.e,c=d.e;if(d.s=i.s==d.s?1:-1,!f[0]||!g[0])return new j(0*d.s);for(d.e=e+c,h<b&&(a=f,f=g,g=a,c=h,h=b,b=c),a=new Array(c=h+b);c--;)a[c]=0;for(e=b;e--;){for(b=0,c=h+e;c>e;)b=a[c]+g[e]*f[c-e-1]+b,a[c--]=b%10,b=b/10|0;a[c]=(a[c]+b)%10}for(b?++d.e:a.shift(),e=a.length;!a[--e];)a.pop();return d.c=a,d},e.toExponential=function(a){return o(this,1,a,a)},e.toFixed=function(a){return o(this,2,a,this.e+a)},e.toPrecision=function(a){return o(this,3,a,a-1)},e.toString=function(){return o(this)},e.valueOf=e.toJSON=function(){return o(this,4)},(f=function b(){function a(c){var d=this;if(!(d instanceof a))return c===l?b():new a(c);c instanceof a?(d.s=c.s,d.e=c.e,d.c=c.c.slice()):function(d,a){var c,b,e;if(0===a&&1/a<0)a="-0";else if(!m.test(a+=""))throw Error(g+"number");for(d.s="-"==a.charAt(0)?(a=a.slice(1),-1):1,(c=a.indexOf("."))> -1&&(a=a.replace(".","")),(b=a.search(/e/i))>0?(c<0&&(c=b),c+=+a.slice(b+1),a=a.substring(0,b)):c<0&&(c=a.length),e=a.length,b=0;b<e&&"0"==a.charAt(b);)++b;if(b==e)d.c=[d.e=0];else{for(;e>0&&"0"==a.charAt(--e););for(d.e=c-b-1,d.c=[],c=0;b<=e;)d.c[c++]=+a.charAt(b++)}}(d,c),d.constructor=a}return a.prototype=e,a.DP=20,a.RM=1,a.NE=-7,a.PE=21,a.version="5.0.2",a}()).default=f.Big=f,void 0===(d=(function(){return f}).call(b,c,b,a))||(a.exports=d)}()},function(f,g,a){"use strict";a(4);var b=a(0),c=a(5),d=(a(6),b.Application.start()),e=a(7);d.load((0,c.definitionsFromContext)(e))},function(a,b,c){!function(){"use strict";!function(b){if("undefined"!=typeof window){var a=document.createElement("style");a.setAttribute("type","text/css"),a.innerHTML=b,document.head.appendChild(a)}}('date-input-polyfill {\n  background: #fff;\n  color: #000;\n  text-shadow: none;\n  border: 0;\n  padding: 0;\n  height: auto;\n  width: auto;\n  line-height: normal;\n  border-radius: 0;\n  font-family: sans-serif;\n  font-size: 14px;\n  position: absolute !important;\n  text-align: center;\n  box-shadow: 0 7px 8px -4px rgba(0, 0, 0, 0.2), 0 12px 17px 2px rgba(0, 0, 0, 0.14), 0 5px 22px 4px rgba(0, 0, 0, 0.12);\n  cursor: default;\n  z-index: 1; }\n  date-input-polyfill[data-open="false"] {\n    display: none; }\n  date-input-polyfill[data-open="true"] {\n    display: block; }\n  date-input-polyfill select, date-input-polyfill table, date-input-polyfill th, date-input-polyfill td {\n    background: #fff;\n    color: #000;\n    text-shadow: none;\n    border: 0;\n    padding: 0;\n    height: auto;\n    width: auto;\n    line-height: normal;\n    border-radius: 0;\n    font-family: sans-serif;\n    font-size: 14px;\n    box-shadow: none; }\n  date-input-polyfill select, date-input-polyfill button {\n    border: 0;\n    border-bottom: 1px solid #E0E0E0;\n    height: 24px;\n    vertical-align: top; }\n  date-input-polyfill select {\n    width: 50%; }\n    date-input-polyfill select:first-of-type {\n      border-right: 1px solid #E0E0E0;\n      width: 30%; }\n  date-input-polyfill button {\n    padding: 0;\n    width: 20%;\n    background: #E0E0E0; }\n  date-input-polyfill table {\n    border-collapse: collapse; }\n  date-input-polyfill th, date-input-polyfill td {\n    width: 32px;\n    padding: 4px;\n    text-align: center; }\n  date-input-polyfill td[data-day] {\n    cursor: pointer; }\n    date-input-polyfill td[data-day]:hover {\n      background: #E0E0E0; }\n  date-input-polyfill [data-selected] {\n    font-weight: bold;\n    background: #D8EAF6; }\n\ninput[data-has-picker]::-ms-clear {\n  display: none; }\n');var d=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},e=function(){function a(d,c){for(var a,b=0;b<c.length;b++)(a=c[b]).enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a=function(){function a(){var c=this;if(d(this,a),a.instance)return a.instance;this.date=new Date,this.input=null,this.isOpen=!1,this.container=document.createElement("date-input-polyfill"),this.year=document.createElement("select"),a.createRangeSelect(this.year,this.date.getFullYear()-80,this.date.getFullYear()+20),this.year.className="yearSelect",this.year.addEventListener("change",function(){c.date.setYear(c.year.value),c.refreshDaysMatrix()}),this.container.appendChild(this.year),this.month=document.createElement("select"),this.month.className="monthSelect",this.month.addEventListener("change",function(){c.date.setMonth(c.month.value),c.refreshDaysMatrix()}),this.container.appendChild(this.month),this.today=document.createElement("button"),this.today.textContent="Today",this.today.addEventListener("click",function(){c.date=new Date,c.setInput()}),this.container.appendChild(this.today);var b=document.createElement("table");this.daysHead=document.createElement("thead"),this.days=document.createElement("tbody"),this.days.addEventListener("click",function(d){var a=d.target;if(!a.hasAttribute("data-day"))return!1;var b=c.days.querySelector("[data-selected]");b&&b.removeAttribute("data-selected"),a.setAttribute("data-selected",""),c.date.setDate(parseInt(a.textContent)),c.setInput()}),b.appendChild(this.daysHead),b.appendChild(this.days),this.container.appendChild(b),this.hide(),document.body.appendChild(this.container),document.addEventListener("click",function(d){for(var a=d.target,b=a===c.container;!b&&(a=a.parentNode);)b=a===c.container;"date"===d.target.getAttribute("type")||b||c.hide()})}return e(a,[{key:"hide",value:function(){this.container.setAttribute("data-open",this.isOpen=!1)}},{key:"show",value:function(){this.container.setAttribute("data-open",this.isOpen=!0)}},{key:"goto",value:function(b){var a=b.getBoundingClientRect();this.container.style.top=a.top+a.height+(document.documentElement.scrollTop||document.body.scrollTop)+"px",this.container.style.left=a.left+(document.documentElement.scrollLeft||document.body.scrollLeft)+"px",this.show()}},{key:"attachTo",value:function(a){return(a!==this.input||!this.isOpen)&&(this.input=a,this.sync(),void this.goto(this.input.element))}},{key:"sync",value:function(){this.date=this.input.element.valueAsDate?a.absoluteDate(this.input.element.valueAsDate):new Date,this.year.value=this.date.getFullYear(),this.month.value=this.date.getMonth(),this.refreshDaysMatrix()}},{key:"setInput",value:function(){var a=this;this.input.element.value=this.date.getFullYear()+"-"+("0"+(this.date.getMonth()+1)).slice(-2)+"-"+("0"+this.date.getDate()).slice(-2),this.input.element.focus(),setTimeout(function(){a.hide()},100),this.pingInput()}},{key:"refreshLocale",value:function(){if(this.locale===this.input.locale)return!1;this.locale=this.input.locale;for(var c=["<tr>"],b=0,d=this.input.localeText.days.length;b<d;++b)c.push('<th scope="col">'+this.input.localeText.days[b]+"</th>");this.daysHead.innerHTML=c.join(""),a.createRangeSelect(this.month,0,11,this.input.localeText.months,this.date.getMonth()),this.today.textContent=this.input.localeText.today}},{key:"refreshDaysMatrix",value:function(){this.refreshLocale();for(var g=this.date.getFullYear(),e=this.date.getMonth(),f=new Date(g,e,1).getDay(),i=new Date(this.date.getFullYear(),e+1,0).getDate(),c=a.absoluteDate(this.input.element.valueAsDate)||!1,j=c&&g===c.getFullYear()&&e===c.getMonth(),d=[],b=0;b<i+f;++b)if(0==b%7&&d.push("\n          "+(0===b?"":"</tr>")+"\n          <tr>\n        "),b+1<=f)d.push("<td></td>");else{var h=b+1-f,k=j&&c.getDate()===h;d.push("<td data-day "+(k?"data-selected":"")+">\n          "+h+"\n        </td>")}this.days.innerHTML=d.join("")}},{key:"pingInput",value:function(){var a,b;try{a=new Event("input"),b=new Event("change")}catch(c){(a=document.createEvent("KeyboardEvent")).initEvent("input",!0,!1),(b=document.createEvent("KeyboardEvent")).initEvent("change",!0,!1)}this.input.element.dispatchEvent(a),this.input.element.dispatchEvent(b)}}],[{key:"createRangeSelect",value:function(c,d,f,e,g){c.innerHTML="";for(var b,a=d;a<=f;++a){b=document.createElement("option"),c.appendChild(b);var h=e?e[a-d]:a;b.text=h,b.value=a,a===g&&(b.selected="selected")}return c}},{key:"absoluteDate",value:function(a){return a&&new Date(a.getTime()+60*a.getTimezoneOffset()*1e3)}}]),a}();a.instance=null;var f={"en_en-US":{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",format:"M/D/Y"},"en-GB":{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",format:"D/M/Y"},"zh_zh-CN":{days:["\u661F\u671F\u5929","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],months:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],today:"\u4ECA\u5929",format:"Y/M/D"},"zh-Hans_zh-Hans-CN":{days:["\u5468\u65E5","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D"],months:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],today:"\u4ECA\u5929",format:"Y/M/D"},"zh-Hant_zh-Hant-TW":{days:["\u9031\u65E5","\u9031\u4E00","\u9031\u4E8C","\u9031\u4E09","\u9031\u56DB","\u9031\u4E94","\u9031\u516D"],months:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],today:"\u4ECA\u5929",format:"Y/M/D"},"de_de-DE":{days:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],today:"Heute",format:"D.M.Y"},"da_da-DA":{days:["S\xf8n","Man","Tirs","Ons","Tors","Fre","L\xf8r"],months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],today:"I dag",format:"D/M/Y"},es:{days:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],today:"Hoy",format:"D/M/Y"},hi:{days:["\u0930\u0935\u093F","\u0938\u094B\u092E","\u092E\u0902\u0917\u0932","\u092C\u0941\u0927","\u0917\u0941\u0930\u0941","\u0936\u0941\u0915\u094D\u0930","\u0936\u0928\u093F"],months:["\u091C\u0928\u0935\u0930\u0940","\u092B\u0930\u0935\u0930\u0940","\u092E\u093E\u0930\u094D\u091A","\u0905\u092A\u094D\u0930\u0947\u0932","\u092E\u0948","\u091C\u0942\u0928","\u091C\u0942\u0932\u093E\u0908","\u0905\u0917\u0938\u094D\u0924","\u0938\u093F\u0924\u092E\u094D\u092C\u0930","\u0906\u0915\u094D\u091F\u094B\u092C\u0930","\u0928\u0935\u092E\u094D\u092C\u0930","\u0926\u093F\u0938\u092E\u094D\u092C\u0930"],today:"\u0906\u091C",format:"D/M/Y"},pt:{days:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],months:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],today:"Hoje",format:"D/M/Y"},ja:{days:["\u65E5","\u6708","\u706B","\u6C34","\u6728","\u91D1","\u571F"],months:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],today:"\u4ECA\u65E5",format:"Y/M/D"},"nl_nl-NL_nl-BE":{days:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],today:"Vandaag",format:"D/M/Y"},"tr_tr-TR":{days:["Pzr","Pzt","Sal","\xc7r\u015F","Pr\u015F","Cum","Cmt"],months:["Ocak","\u015Eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011Fustos","Eyl\xfcl","Ekim","Kas\u0131m","Aral\u0131k"],today:"Bug\xfcn",format:"D/M/Y"},"fr_fr-FR":{days:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],months:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],today:"Auj.",format:"D/M/Y"},"uk_uk-UA":{days:["\u041D\u0434","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],months:["\u0421\u0456\u0447\u0435\u043D\u044C","\u041B\u044E\u0442\u0438\u0439","\u0411\u0435\u0440\u0435\u0437\u0435\u043D\u044C","\u041A\u0432\u0456\u0442\u0435\u043D\u044C","\u0422\u0440\u0430\u0432\u0435\u043D\u044C","\u0427\u0435\u0440\u0432\u0435\u043D\u044C","\u041B\u0438\u043F\u0435\u043D\u044C","\u0421\u0435\u0440\u043F\u0435\u043D\u044C","\u0412\u0435\u0440\u0435\u0441\u0435\u043D\u044C","\u0416\u043E\u0432\u0442\u0435\u043D\u044C","\u041B\u0438\u0441\u0442\u043E\u043F\u0430\u0434","\u0413\u0440\u0443\u0434\u0435\u043D\u044C"],today:"\u0421\u044C\u043E\u0433\u043E\u0434\u043D\u0456",format:"D.M.Y"},it:{days:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","ottobre","Novembre","Dicembre"],today:"Oggi",format:"D/M/Y"},pl:{days:["Nie","Pon","Wto","\u015Aro","Czw","Pt","Sob"],months:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017Adziernik","Listopad","Grudzie\u0144"],today:"Dzisiaj",format:"D.M.Y"},cs:{days:["Po","\xdat","St","\u010Ct","P\xe1","So","Ne"],months:["Leden","\xdanor","B\u0159ezen","Duben","Kv\u011Bten","\u010Cerven","\u010Cervenec","Srpen","Z\xe1\u0159\xed","\u0158\xedjen","Listopad","Prosinec"],today:"Dnes",format:"D.M.Y"},ru:{days:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",format:"D.M.Y"}},b=function(){function b(g){var h=this;d(this,b),this.element=g,this.element.setAttribute("data-has-picker","");for(var c=this.element,f="";c.parentNode&&!(f=c.getAttribute("lang"));)c=c.parentNode;this.locale=f||"en",this.localeText=this.getLocaleText(),Object.defineProperties(this.element,{value:{get:function(){return h.element.polyfillValue},set:function(a){if(!/^\d{4}-\d{2}-\d{2}$/.test(a))return h.element.polyfillValue="",h.element.setAttribute("value",""),!1;h.element.polyfillValue=a;var b=a.split("-");h.element.setAttribute("value",h.localeText.format.replace("Y",b[0]).replace("M",b[1]).replace("D",b[2]))}},valueAsDate:{get:function(){return h.element.polyfillValue?new Date(h.element.polyfillValue):null},set:function(a){h.element.value=a.toISOString().slice(0,10)}},valueAsNumber:{get:function(){return h.element.value?h.element.valueAsDate.getTime():NaN},set:function(a){h.element.valueAsDate=new Date(a)}}}),this.element.value=this.element.getAttribute("value");var e=function(){a.instance.attachTo(h)};this.element.addEventListener("focus",e),this.element.addEventListener("mousedown",e),this.element.addEventListener("mouseup",e),this.element.addEventListener("keydown",function(c){var b=new Date;switch(c.keyCode){case 27:a.instance.hide();break;case 38:h.element.valueAsDate&&(b.setDate(h.element.valueAsDate.getDate()+1),h.element.valueAsDate=b,a.instance.pingInput());break;case 40:h.element.valueAsDate&&(b.setDate(h.element.valueAsDate.getDate()-1),h.element.valueAsDate=b,a.instance.pingInput())}a.instance.sync()})}return e(b,[{key:"getLocaleText",value:function(){var a=this.locale.toLowerCase();for(var b in f)if(~b.split("_").map(function(a){return a.toLowerCase()}).indexOf(a))return f[b];for(var c in f)if(~c.split("_").map(function(a){return a.toLowerCase()}).indexOf(a.substr(0,2)))return f[c];return this.locale="en",this.getLocaleText()}}],[{key:"supportsDateInput",value:function(){var a=document.createElement("input");a.setAttribute("type","date");var b="not-a-date";return a.setAttribute("value",b),document.currentScript&&!document.currentScript.hasAttribute("data-nodep-date-input-polyfill-debug")&&a.value!==b}},{key:"addPickerToDateInputs",value:function(){var c=document.querySelectorAll('input[type="date"]:not([data-has-picker]):not([readonly])'),d=c.length;if(!d)return!1;for(var a=0;a<d;++a)new b(c[a])}}]),b}();if(!b.supportsDateInput()){var c=function(){a.instance=new a,b.addPickerToDateInputs(),document.querySelector("body").addEventListener("mousedown",function(){b.addPickerToDateInputs()})};if("complete"===document.readyState)c();else{var g=!1;document.addEventListener("DOMContentLoaded",function(){g=!0,c()}),window.addEventListener("load",function(){g||c()})}}}()},function(c,a,b){"use strict";function d(a){return a.keys().map(function(b){return function(c,a){var b=e(a);if(b)return function(b,c){var a=b.default;if("function"==typeof a)return{identifier:c,controllerConstructor:a}}(c(a),b)}(a,b)}).filter(function(a){return a})}function e(b){var a=(b.match(/^(?:\.\/)?(.+)(?:[_-]controller\..+?)$/)||[])[1];if(a)return a.replace(/_/g,"-").replace(/\//g,"--")}Object.defineProperty(a,"__esModule",{value:!0}),b.d(a,"definitionsFromContext",function(){return d}),b.d(a,"identifierForContextKey",function(){return e})},function(z,b,d){"use strict";var k,l,m,n,o,p,q,r,s,c,a,i,h,g,f,e;Object.defineProperty(b,"__esModule",{value:!0}),d.d(b,"clearCache",function(){return ai}),d.d(b,"connectStreamSource",function(){return af}),d.d(b,"disconnectStreamSource",function(){return ag}),d.d(b,"navigator",function(){return ac}),d.d(b,"registerAdapter",function(){return ad}),d.d(b,"renderStreamMessage",function(){return ah}),d.d(b,"setProgressBarDelay",function(){return aj}),d.d(b,"start",function(){return y}),d.d(b,"visit",function(){return ae}),function(){if(void 0===window.Reflect|| void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;let a=HTMLElement,b=function(){return Reflect.construct(a,[],this.constructor)};window.HTMLElement=b,HTMLElement.prototype=a.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,a)}();let A=new WeakMap;"SubmitEvent"in window||(addEventListener("click",function(b){let a=function(a){let c=a instanceof Element?a:a instanceof Node?a.parentElement:null,b=c?c.closest("input, button"):null;return"submit"==(null==b?void 0:b.type)?b:null}(b.target);a&&a.form&&A.set(a.form,a)},!0),Object.defineProperty(Event.prototype,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return A.get(this.target)}})),(s=k||(k={})).eager="eager",s.lazy="lazy";class t extends HTMLElement{constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new t.delegateConstructor(this)}static get observedAttributes(){return["loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}attributeChangedCallback(a){"loading"==a?this.delegate.loadingStyleChanged():"src"==a&&this.delegate.sourceURLChanged()}get src(){return this.getAttribute("src")}set src(a){a?this.setAttribute("src",a):this.removeAttribute("src")}get loading(){var a;return"lazy"===(a=this.getAttribute("loading")||"").toLowerCase()?k.lazy:k.eager}set loading(a){a?this.setAttribute("loading",a):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(a){a?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(a){a?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var a,b;return null===(b=null===(a=this.ownerDocument)|| void 0===a?void 0:a.documentElement)|| void 0===b?void 0:b.hasAttribute("data-turbo-preview")}}function B(b){let a=document.createElement("a");return a.href=b.toString(),new URL(a.href)}function C(a){let b;return a.hash?a.hash.slice(1):(b=a.href.match(/#(.*)$/))?b[1]:""}function D(a){let b=a.hash.length;return b<2?a.href:a.href.slice(0,-b)}class E{constructor(a){this.response=a}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return B(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.text()}get responseHTML(){return this.isHTML?this.response.text():Promise.resolve(void 0)}header(a){return this.response.headers.get(a)}}function F(b,{target:c,cancelable:d,detail:e}={}){let a=new CustomEvent(b,{cancelable:d,bubbles:!0,detail:e});return(c||document.documentElement).dispatchEvent(a),a}function G(){return new Promise(a=>requestAnimationFrame(()=>a()))}function H(a=""){return(new DOMParser).parseFromString(a,"text/html")}function I(d,...e){var a,f;let b=(a=d,f=e,a.reduce((b,c,a)=>{let d=void 0==f[a]?"":f[a];return b+c+d},"")).replace(/^\n/,"").split("\n"),c=b[0].match(/^\s+/),g=c?c[0].length:0;return b.map(a=>a.slice(g)).join("\n")}function J(){return Array.apply(null,{length:36}).map((b,a)=>8==a||13==a||18==a||23==a?"-":14==a?"4":19==a?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16)).join("")}(c=l||(l={}))[c.get=0]="get",c[c.post=1]="post",c[c.put=2]="put",c[c.patch=3]="patch",c[c.delete=4]="delete";class K{constructor(c,d,a,b=new URLSearchParams){this.abortController=new AbortController,this.delegate=c,this.method=d,this.isIdempotent?this.url=function(a,e){let d=new URLSearchParams(a.search);for(let[b,c]of e)c instanceof File||(d.has(b)?(d.delete(b),a.searchParams.set(b,c)):a.searchParams.append(b,c));return a}(a,[...b.entries()]):(this.body=b,this.url=a)}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:a}=this;F("turbo:before-fetch-request",{detail:{fetchOptions:a}});try{this.delegate.requestStarted(this);let c=await fetch(this.url.href,a);return await this.receive(c)}catch(b){throw this.delegate.requestErrored(this,b),b}finally{this.delegate.requestFinished(this)}}async receive(b){let a=new E(b);return F("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:a}}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,a):a.succeeded?this.delegate.requestSucceededWithResponse(this,a):this.delegate.requestFailedWithResponse(this,a),a}get fetchOptions(){return{method:l[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.body,signal:this.abortSignal}}get isIdempotent(){return this.method==l.get}get headers(){let a=Object.assign({},this.defaultHeaders);return"function"==typeof this.delegate.prepareHeadersForRequest&&this.delegate.prepareHeadersForRequest(a,this),a}get abortSignal(){return this.abortController.signal}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}}class v{constructor(a){this.templateElement=document.createElement("template"),this.templateElement.innerHTML=a}static wrap(a){return"string"==typeof a?new this(a):a}get fragment(){let a=document.createDocumentFragment();for(let b of this.foreignElements)a.appendChild(document.importNode(b,!0));return a}get foreignElements(){return this.templateChildren.reduce((a,b)=>"turbo-stream"==b.tagName.toLowerCase()?[...a,b]:a,[])}get templateChildren(){return Array.from(this.templateElement.content.children)}}v.contentType="text/vnd.turbo-stream.html",(a=m||(m={}))[a.initialized=0]="initialized",a[a.requesting=1]="requesting",a[a.waiting=2]="waiting",a[a.receiving=3]="receiving",a[a.stopping=4]="stopping",a[a.stopped=5]="stopped",(i=n||(n={})).urlEncoded="application/x-www-form-urlencoded",i.multipart="multipart/form-data",i.plain="text/plain";class _{constructor(c,a,b,d=!1){this.state=m.initialized,this.delegate=c,this.formElement=a,this.submitter=b,this.formData=function(e,a){let b=new FormData(e),c=null==a?void 0:a.getAttribute("name"),d=null==a?void 0:a.getAttribute("value");return c&&b.get(c)!=d&&b.append(c,d||""),b}(a,b),this.fetchRequest=new K(this,this.method,this.location,this.body),this.mustRedirect=d}get method(){var a;return function(a){switch(a.toLowerCase()){case"get":return l.get;case"post":return l.post;case"put":return l.put;case"patch":return l.patch;case"delete":return l.delete}}(((null===(a=this.submitter)|| void 0===a?void 0:a.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"").toLowerCase())||l.get}get action(){var a;return(null===(a=this.submitter)|| void 0===a?void 0:a.getAttribute("formaction"))||this.formElement.action}get location(){return B(this.action)}get body(){return this.enctype==n.urlEncoded||this.method==l.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var a;return function(a){switch(a.toLowerCase()){case n.multipart:return n.multipart;case n.plain:return n.plain;default:return n.urlEncoded}}((null===(a=this.submitter)|| void 0===a?void 0:a.getAttribute("formenctype"))||this.formElement.enctype)}get stringFormData(){return[...this.formData].reduce((b,[c,a])=>b.concat("string"==typeof a?[[c,a]]:[]),[])}async start(){let{initialized:a,requesting:b}=m;if(this.state==a)return this.state=b,this.fetchRequest.perform()}stop(){let{stopping:a,stopped:b}=m;if(this.state!=a&&this.state!=b)return this.state=a,this.fetchRequest.cancel(),!0}prepareHeadersForRequest(a,c){if(!c.isIdempotent){let b=function(c){if(null!=c){let d=document.cookie?document.cookie.split("; "):[],a=d.find(a=>a.startsWith(c));if(a){let b=a.split("=").slice(1).join("=");return b?decodeURIComponent(b):void 0}}}(L("csrf-param"))||L("csrf-token");b&&(a["X-CSRF-Token"]=b),a.Accept=[v.contentType,a.Accept].join(", ")}}requestStarted(a){this.state=m.waiting,F("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(b,a){this.result={success:a.succeeded,fetchResponse:a}}requestSucceededWithResponse(c,a){if(a.clientError||a.serverError)this.delegate.formSubmissionFailedWithResponse(this,a);else{var b;if(this.requestMustRedirect(c)&&200==(b=a).statusCode&&!b.redirected){let d=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,d)}else this.state=m.receiving,this.result={success:!0,fetchResponse:a},this.delegate.formSubmissionSucceededWithResponse(this,a)}}requestFailedWithResponse(b,a){this.result={success:!1,fetchResponse:a},this.delegate.formSubmissionFailedWithResponse(this,a)}requestErrored(b,a){this.result={success:!1,error:a},this.delegate.formSubmissionErrored(this,a)}requestFinished(a){this.state=m.stopped,F("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}requestMustRedirect(a){return!a.isIdempotent&&this.mustRedirect}}function L(b){let a=document.querySelector(`meta[name="${b}"]`);return a&&a.content}class u{constructor(a){this.element=a}get children(){return[...this.element.children]}hasAnchor(a){return null!=this.getElementForAnchor(a)}getElementForAnchor(a){try{return this.element.querySelector(`[id='${a}'], a[name='${a}']`)}catch(b){return null}}get firstAutofocusableElement(){return this.element.querySelector("[autofocus]")}get permanentElements(){return[...this.element.querySelectorAll("[id][data-turbo-permanent]")]}getPermanentElementById(a){return this.element.querySelector(`#${a}[data-turbo-permanent]`)}getPermanentElementsPresentInSnapshot(a){return this.permanentElements.filter(({id:b})=>a.getPermanentElementById(b))}}class M{constructor(a,b){this.submitBubbled=a=>{if(a.target instanceof HTMLFormElement){let b=a.target,c=a.submitter||void 0;this.delegate.shouldInterceptFormSubmission(b,c)&&(a.preventDefault(),a.stopImmediatePropagation(),this.delegate.formSubmissionIntercepted(b,c))}},this.delegate=a,this.element=b}start(){this.element.addEventListener("submit",this.submitBubbled)}stop(){this.element.removeEventListener("submit",this.submitBubbled)}}class N{constructor(a,b){this.delegate=a,this.element=b}scrollToAnchor(b){let a=this.snapshot.getElementForAnchor(b);a?this.scrollToElement(a):this.scrollToPosition({x:0,y:0})}scrollToElement(a){a.scrollIntoView()}scrollToPosition({x:a,y:b}){this.scrollRoot.scrollTo(a,b)}get scrollRoot(){return window}async render(a){if(this.renderer)throw new Error("rendering is already in progress");let{isPreview:b,shouldRender:d,newSnapshot:c}=a;if(d)try{this.renderer=a,this.prepareToRenderSnapshot(a),this.delegate.viewWillRenderSnapshot(c,b),await this.renderSnapshot(a),this.delegate.viewRenderedSnapshot(c,b),this.finishRenderingSnapshot(a)}finally{delete this.renderer}else this.invalidate()}invalidate(){this.delegate.viewInvalidated()}prepareToRenderSnapshot(a){this.markAsPreview(a.isPreview),a.prepareToRender()}markAsPreview(a){a?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(a){await a.render()}finishRenderingSnapshot(a){a.finishRendering()}}class O{constructor(a,b){this.clickBubbled=a=>{this.respondsToEventTarget(a.target)?this.clickEvent=a:delete this.clickEvent},this.linkClicked=a=>{this.clickEvent&&this.respondsToEventTarget(a.target)&&a.target instanceof Element&&this.delegate.shouldInterceptLinkClick(a.target,a.detail.url)&&(this.clickEvent.preventDefault(),a.preventDefault(),this.delegate.linkClickIntercepted(a.target,a.detail.url)),delete this.clickEvent},this.willVisit=()=>{delete this.clickEvent},this.delegate=a,this.element=b}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(a){let b=a instanceof Element?a:a instanceof Node?a.parentElement:null;return b&&b.closest("turbo-frame, html")==this.element}}class j{constructor(a,b,c){this.currentSnapshot=a,this.newSnapshot=b,this.isPreview=c,this.promise=new Promise((a,b)=>this.resolvingFunctions={resolve:a,reject:b})}get shouldRender(){return!0}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}createScriptElement(a){if("false"==a.getAttribute("data-turbo-eval"))return a;{let b=document.createElement("script");return b.textContent=a.textContent,b.async=!1,function(a,b){for(let{name:c,value:d}of[...b.attributes])a.setAttribute(c,d)}(b,a),b}}preservingPermanentElements(c){var a,b;let d=(a=this.currentSnapshot,b=this.newSnapshot,a.getPermanentElementsPresentInSnapshot(b).reduce((c,a)=>{let d=b.getPermanentElementById(a.id);if(d){let e=function(b){let a=document.createElement("meta");return a.setAttribute("name","turbo-permanent-placeholder"),a.setAttribute("content",b.id),{element:a,permanentElement:b}}(a);return P(a,e.element),P(d,a),[...c,e]}return c},[]));c(),function(a){for(let{element:b,permanentElement:c}of a){let d=c.cloneNode(!0);P(b,d)}}(d)}focusFirstAutofocusableElement(){var a;let b=this.newSnapshot.firstAutofocusableElement;(a=b)&&"function"==typeof a.focus&&b.focus()}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}}function P(a,c){let b=a.parentElement;if(b)return b.replaceChild(c,a)}class Q extends j{get shouldRender(){return!0}async render(){await G(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await G(),this.focusFirstAutofocusableElement()}loadFrameElement(){var a;let c=document.createRange();c.selectNodeContents(this.currentElement),c.deleteContents();let d=this.newElement,b=null===(a=d.ownerDocument)|| void 0===a?void 0:a.createRange();b&&(b.selectNodeContents(d),this.currentElement.appendChild(b.extractContents()))}scrollFrameIntoView(){var a;if(this.currentElement.autoscroll||this.newElement.autoscroll){let b=this.currentElement.firstElementChild,c="end"==(a=this.currentElement.getAttribute("data-autoscroll-block"))||"start"==a||"center"==a||"nearest"==a?a:"end";if(b)return b.scrollIntoView({block:c}),!0}return!1}}function R(a){if(null!=a){let b=document.getElementById(a);if(b instanceof t)return b}}function S(a){if(a&&a.ownerDocument!==document&&(a=document.importNode(a,!0)),a instanceof t)return a}let T={append(){var a;null===(a=this.targetElement)|| void 0===a||a.append(this.templateContent)},prepend(){var a;null===(a=this.targetElement)|| void 0===a||a.prepend(this.templateContent)},remove(){var a;null===(a=this.targetElement)|| void 0===a||a.remove()},replace(){var a;null===(a=this.targetElement)|| void 0===a||a.replaceWith(this.templateContent)},update(){this.targetElement&&(this.targetElement.innerHTML="",this.targetElement.append(this.templateContent))}};t.delegateConstructor=class{constructor(a){this.resolveVisitPromise=()=>{},this.element=a,this.view=new class extends N{invalidate(){this.element.innerHTML=""}get snapshot(){return new u(this.element)}}(this,this.element),this.appearanceObserver=new class{constructor(a,b){this.started=!1,this.intersect=b=>{let a=b.slice(-1)[0];(null==a?void 0:a.isIntersecting)&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=a,this.element=b,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}(this,this.element),this.linkInterceptor=new O(this,this.element),this.formInterceptor=new M(this,this.element)}connect(){this.loadingStyle==k.lazy&&this.appearanceObserver.start(),this.linkInterceptor.start(),this.formInterceptor.start()}disconnect(){this.appearanceObserver.stop(),this.linkInterceptor.stop(),this.formInterceptor.stop()}sourceURLChanged(){this.loadingStyle==k.eager&&this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==k.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){if(this.isActive&&this.sourceURL&&this.sourceURL!=this.loadingURL)try{this.loadingURL=this.sourceURL,this.element.loaded=this.visit(this.sourceURL),this.appearanceObserver.stop(),await this.element.loaded}finally{delete this.loadingURL}}async loadResponse(b){try{let a=await b.responseHTML;if(a){let{body:c}=H(a),d=new u(await this.extractForeignFrameElement(c)),e=new Q(this.view.snapshot,d,!1);await this.view.render(e)}}catch(f){console.error(f),this.view.invalidate()}}elementAppearedInViewport(a){this.loadSourceURL()}shouldInterceptLinkClick(a,b){return this.shouldInterceptNavigation(a)}linkClickIntercepted(a,b){this.navigateFrame(a,b)}shouldInterceptFormSubmission(a){return this.shouldInterceptNavigation(a)}formSubmissionIntercepted(a,b){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new _(this,a,b),this.formSubmission.fetchRequest.isIdempotent?this.navigateFrame(a,this.formSubmission.fetchRequest.url.href):this.formSubmission.start()}prepareHeadersForRequest(a,b){a["Turbo-Frame"]=this.id}requestStarted(a){this.element.setAttribute("busy","")}requestPreventedHandlingResponse(a,b){this.resolveVisitPromise()}async requestSucceededWithResponse(b,a){await this.loadResponse(a),this.resolveVisitPromise()}requestFailedWithResponse(b,a){console.error(a),this.resolveVisitPromise()}requestErrored(b,a){console.error(a),this.resolveVisitPromise()}requestFinished(a){this.element.removeAttribute("busy")}formSubmissionStarted(a){}formSubmissionSucceededWithResponse(a,b){this.findFrameElement(a.formElement).delegate.loadResponse(b)}formSubmissionFailedWithResponse(b,a){this.element.delegate.loadResponse(a)}formSubmissionErrored(a,b){}formSubmissionFinished(a){}viewWillRenderSnapshot(a,b){}viewRenderedSnapshot(a,b){}viewInvalidated(){}async visit(a){let b=new K(this,l.get,B(a));return new Promise(a=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},a()},b.perform()})}navigateFrame(a,b){this.findFrameElement(a).src=b}findFrameElement(b){var a;return null!==(a=R(b.getAttribute("data-turbo-frame")||this.element.getAttribute("target")))&& void 0!==a?a:this.element}async extractForeignFrameElement(c){let a,b=CSS.escape(this.id);return(a=S(c.querySelector(`turbo-frame#${b}`)))?a:(a=S(c.querySelector(`turbo-frame[src][recurse~=${b}]`)))?(await a.loaded,await this.extractForeignFrameElement(a)):(console.error(`Response has no matching <turbo-frame id="${b}"> element`),new t)}shouldInterceptNavigation(c){let a=c.getAttribute("data-turbo-frame")||this.element.getAttribute("target");if(!this.enabled||"_top"==a)return!1;if(a){let b=R(a);if(b)return!b.disabled}return!0}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){return this.element.src}get loadingStyle(){return this.element.loading}get isLoading(){return void 0!==this.formSubmission|| void 0!==this.loadingURL}get isActive(){return this.element.isActive}},customElements.define("turbo-frame",t),customElements.define("turbo-stream",class extends HTMLElement{async connectedCallback(){try{await this.render()}catch(a){console.error(a)}finally{this.disconnect()}}async render(){var a;return null!==(a=this.renderPromise)&& void 0!==a?a:this.renderPromise=(async()=>{this.dispatchEvent(this.beforeRenderEvent)&&(await G(),this.performAction())})()}disconnect(){try{this.remove()}catch(a){}}get performAction(){if(this.action){let a=T[this.action];if(a)return a;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElement(){var a;if(this.target)return null===(a=this.ownerDocument)|| void 0===a?void 0:a.getElementById(this.target);this.raise("target attribute is missing")}get templateContent(){return this.templateElement.content}get templateElement(){if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}raise(a){throw new Error(`${this.description}: ${a}`)}get description(){var a,b;return null!==(b=(null!==(a=this.outerHTML.match(/<[^>]+>/))&& void 0!==a?a:[])[0])&& void 0!==b?b:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0})}}),(()=>{let a=document.currentScript;if(a&&!a.hasAttribute("data-turbo-suppress-warning")){for(;a=a.parentElement;)if(a==document.body)return console.warn(I`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwire.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,a.outerHTML)}})();class w{constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return I`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 9999;
        transition:
          width ${w.animationDuration}ms ease-out,
          opacity ${w.animationDuration/2}ms ${w.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(a){this.value=a,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(a){this.progressElement.style.opacity="0",setTimeout(a,1.5*w.animationDuration)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,w.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+90*this.value}%`})}createStylesheetElement(){let a=document.createElement("style");return a.type="text/css",a.textContent=w.defaultCSS,a}createProgressElement(){let a=document.createElement("div");return a.className="turbo-progress-bar",a}}w.animationDuration=300;class U extends u{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.reduce((b,a)=>{var d,f;let{outerHTML:c}=a,e=c in b?b[c]:{type:"script"==(d=a).tagName.toLowerCase()?"script":!function(a){let b=a.tagName.toLowerCase();return"style"==b||"link"==b&&"stylesheet"==a.getAttribute("rel")}(d)?void 0:"stylesheet",tracked:"reload"==a.getAttribute("data-turbo-track"),elements:[]};return Object.assign(Object.assign({},b),{[c]:Object.assign(Object.assign({},e),{elements:[...e.elements,a]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(a=>this.detailsByOuterHTML[a].tracked).join("")}getScriptElementsNotInSnapshot(a){return this.getElementsMatchingTypeNotInSnapshot("script",a)}getStylesheetElementsNotInSnapshot(a){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",a)}getElementsMatchingTypeNotInSnapshot(a,b){return Object.keys(this.detailsByOuterHTML).filter(a=>!(a in b.detailsByOuterHTML)).map(a=>this.detailsByOuterHTML[a]).filter(({type:b})=>b==a).map(({elements:[a]})=>a)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((a,c)=>{let{type:d,tracked:e,elements:b}=this.detailsByOuterHTML[c];return null!=d||e?b.length>1?[...a,...b.slice(1)]:a:[...a,...b]},[])}getMetaValue(b){let a=this.findMetaElementByName(b);return a?a.getAttribute("content"):null}findMetaElementByName(a){return Object.keys(this.detailsByOuterHTML).reduce((e,f)=>{var b,c;let{elements:[d]}=this.detailsByOuterHTML[f];return(b=d,c=a,"meta"==b.tagName.toLowerCase()&&b.getAttribute("name")==c)?d:e},void 0)}}class V extends u{constructor(a,b){super(a),this.headSnapshot=b}static fromHTMLString(a=""){return this.fromDocument(H(a))}static fromElement(a){return this.fromDocument(a.ownerDocument)}static fromDocument({head:a,body:b}){return new this(b,new U(a))}clone(){return new V(this.element.cloneNode(!0),this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var a;return B(null!==(a=this.getSetting("root"))&& void 0!==a?a:"/")}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return"no-preview"!=this.cacheControlValue}get isCacheable(){return"no-cache"!=this.cacheControlValue}get isVisitable(){return"reload"!=this.getSetting("visit-control")}getSetting(a){return this.headSnapshot.getMetaValue(`turbo-${a}`)}}(h=o||(o={})).visitStart="visitStart",h.requestStart="requestStart",h.requestEnd="requestEnd",h.visitEnd="visitEnd",(g=p||(p={})).initialized="initialized",g.started="started",g.canceled="canceled",g.failed="failed",g.completed="completed",(f=q||(q={}))[f.networkFailure=0]="networkFailure",f[f.timeoutFailure=-1]="timeoutFailure",f[f.contentTypeMismatch=-2]="contentTypeMismatch";class W{constructor(a,b,c,d={}){this.identifier=J(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.snapshotCached=!1,this.state=p.initialized,this.delegate=a,this.location=b,this.restorationIdentifier=c||J();let{action:e,historyChanged:f,referrer:g,snapshotHTML:h,response:i}=Object.assign(Object.assign({},{action:"advance",historyChanged:!1}),d);this.action=e,this.historyChanged=f,this.referrer=g,this.snapshotHTML=h,this.response=i}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}start(){this.state==p.initialized&&(this.recordTimingMetric(o.visitStart),this.state=p.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==p.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=p.canceled)}complete(){this.state==p.started&&(this.recordTimingMetric(o.visitEnd),this.state=p.completed,this.adapter.visitCompleted(this),this.delegate.visitCompleted(this))}fail(){this.state==p.started&&(this.state=p.failed,this.adapter.visitFailed(this))}changeHistory(){var a;if(!this.historyChanged){let b=this.location.href===(null===(a=this.referrer)|| void 0===a?void 0:a.href)?"replace":this.action,c=this.getHistoryMethodForAction(b);this.history.update(c,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new K(this,l.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(o.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(a=this.response){if(this.response=a,a){let{statusCode:b}=a;X(b)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,b)}}finishRequest(){this.recordTimingMetric(o.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:a,responseHTML:b}=this.response;this.render(async()=>{this.cacheSnapshot(),X(a)&&null!=b?(await this.view.renderPage(V.fromHTMLString(b)),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(V.fromHTMLString(b)),this.adapter.visitRendered(this),this.fail())})}}getCachedSnapshot(){let a=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(a&&(!C(this.location)||a.hasAnchor(C(this.location)))&&("restore"==this.action||a.isPreviewable))return a}getPreloadedSnapshot(){if(this.snapshotHTML)return V.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return null!=this.getCachedSnapshot()}loadCachedSnapshot(){let a=this.getCachedSnapshot();if(a){let b=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),await this.view.renderPage(a),this.adapter.visitRendered(this),b||this.complete()})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&(this.location=this.redirectedToLocation,this.history.replace(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(a,b){}async requestSucceededWithResponse(c,a){let b=await a.responseHTML;void 0==b?this.recordResponse({statusCode:q.contentTypeMismatch}):(this.redirectedToLocation=a.redirected?a.location:void 0,this.recordResponse({statusCode:a.statusCode,responseHTML:b}))}async requestFailedWithResponse(c,a){let b=await a.responseHTML;void 0==b?this.recordResponse({statusCode:q.contentTypeMismatch}):this.recordResponse({statusCode:a.statusCode,responseHTML:b})}requestErrored(a,b){this.recordResponse({statusCode:q.networkFailure})}requestFinished(){this.finishRequest()}performScroll(){this.scrolled||("restore"==this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:a}=this.restorationData;if(a)return this.view.scrollToPosition(a),!0}scrollToAnchor(){if(null!=C(this.location))return this.view.scrollToAnchor(C(this.location)),!0}scrollToTop(){this.view.scrollToPosition({x:0,y:0})}recordTimingMetric(a){this.timingMetrics[a]=(new Date).getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(a){switch(a){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return"object"==typeof this.response}shouldIssueRequest(){return"restore"!=this.action||!this.hasCachedSnapshot()}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(),this.snapshotCached=!0)}async render(a){this.cancelRender(),await new Promise(a=>{this.frame=requestAnimationFrame(()=>a())}),a(),delete this.frame,this.performScroll()}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function X(a){return a>=200&&a<300}(e=r||(r={}))[e.initial=0]="initial",e[e.loading=1]="loading",e[e.interactive=2]="interactive",e[e.complete=3]="complete";class Y extends j{async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:a,head:b,body:c}=document;a.replaceChild(this.newHead,b),a.replaceChild(this.newElement,c)}activateScriptElements(){for(let a of this.scriptElements){let b=a.parentNode;if(b){let c=this.createScriptElement(a);b.replaceChild(c,a)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return[...document.documentElement.querySelectorAll("script")]}}class Z extends j{get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}prepareToRender(){this.mergeHead()}async render(){this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview&&this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}mergeHead(){this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()}replaceBody(){this.preservingPermanentElements(()=>{this.activateNewBody(),this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}copyNewHeadStylesheetElements(){for(let a of this.newHeadStylesheetElements)document.head.appendChild(a)}copyNewHeadScriptElements(){for(let a of this.newHeadScriptElements)document.head.appendChild(this.createScriptElement(a))}removeCurrentHeadProvisionalElements(){for(let a of this.currentHeadProvisionalElements)document.head.removeChild(a)}copyNewHeadProvisionalElements(){for(let a of this.newHeadProvisionalElements)document.head.appendChild(a)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let a of this.newBodyScriptElements)P(a,this.createScriptElement(a))}assignNewBody(){document.body&&this.newElement instanceof HTMLBodyElement?P(document.body,this.newElement):document.documentElement.appendChild(this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return[...this.newElement.querySelectorAll("script")]}}function aa(a){Object.defineProperties(a,ab)}let ab={absoluteURL:{get(){return this.toString()}}},x=new class{constructor(){this.navigator=new class{constructor(a){this.delegate=a}proposeVisit(a,b={}){this.delegate.allowsVisitingLocation(a)&&this.delegate.visitProposedToLocation(a,b)}startVisit(a,b,c={}){this.stop(),this.currentVisit=new W(this,B(a),b,Object.assign({referrer:this.location},c)),this.currentVisit.start()}submitForm(a,b){this.stop(),this.formSubmission=new _(this,a,b,!0),this.formSubmission.fetchRequest.isIdempotent?this.proposeVisit(this.formSubmission.fetchRequest.url):this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(a){}async formSubmissionSucceededWithResponse(b,a){if(b==this.formSubmission){let c=await a.responseHTML;if(c){b.method!=l.get&&this.view.clearSnapshotCache();let{statusCode:d}=a,e={response:{statusCode:d,responseHTML:c}};this.proposeVisit(a.location,e)}}}async formSubmissionFailedWithResponse(d,b){let a=await b.responseHTML;if(a){let c=V.fromHTMLString(a);await this.view.renderPage(c),this.view.clearSnapshotCache()}}formSubmissionErrored(a,b){}formSubmissionFinished(a){}visitStarted(a){this.delegate.visitStarted(a)}visitCompleted(a){this.delegate.visitCompleted(a)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}}(this),this.history=new class{constructor(a){this.restorationIdentifier=J(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=c=>{if(this.shouldHandlePopState()){let{turbo:a}=c.state||{};if(a){this.location=new URL(window.location.href);let{restorationIdentifier:b}=a;this.restorationIdentifier=b,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,b)}}},this.onPageLoad=async a=>{await Promise.resolve(),this.pageLoaded=!0},this.delegate=a}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(a,b){this.update(history.pushState,a,b)}replace(a,b){this.update(history.replaceState,a,b)}update(c,a,b=J()){c.call(history,{turbo:{restorationIdentifier:b}},"",a.href),this.location=a,this.restorationIdentifier=b}getRestorationDataForIdentifier(a){return this.restorationData[a]||{}}updateRestorationData(b){let{restorationIdentifier:a}=this,c=this.restorationData[a];this.restorationData[a]=Object.assign(Object.assign({},c),b)}assumeControlOfScrollRestoration(){var a;this.previousScrollRestoration||(this.previousScrollRestoration=null!==(a=history.scrollRestoration)&& void 0!==a?a:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||"complete"==document.readyState}}(this),this.view=new class extends N{constructor(){super(...arguments),this.snapshotCache=new class{constructor(a){this.keys=[],this.snapshots={},this.size=a}has(a){return D(a) in this.snapshots}get(a){if(this.has(a)){let b=this.read(a);return this.touch(a),b}}put(a,b){return this.write(a,b),this.touch(a),b}clear(){this.snapshots={}}read(a){return this.snapshots[D(a)]}write(a,b){this.snapshots[D(a)]=b}touch(c){let a=D(c),b=this.keys.indexOf(a);b> -1&&this.keys.splice(b,1),this.keys.unshift(a),this.trim()}trim(){for(let a of this.keys.splice(this.size))delete this.snapshots[a]}}(10),this.lastRenderedLocation=new URL(location.href)}renderPage(a,b=!1){let c=new Z(this.snapshot,a,b);return this.render(c)}renderError(a){let b=new Y(this.snapshot,a,!1);this.render(b)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(){if(this.shouldCacheSnapshot){this.delegate.viewWillCacheSnapshot();let{snapshot:a,lastRenderedLocation:b}=this;await new Promise(a=>setTimeout(()=>a(),0)),this.snapshotCache.put(b,a.clone())}}getCachedSnapshotForLocation(a){return this.snapshotCache.get(a)}get snapshot(){return V.fromElement(this.element)}get shouldCacheSnapshot(){return this.snapshot.isCacheable}}(this,document.documentElement),this.adapter=new class{constructor(a){this.progressBar=new w,this.showProgressBar=()=>{this.progressBar.show()},this.session=a}visitProposedToLocation(a,b){this.navigator.startVisit(a,J(),b)}visitStarted(a){a.issueRequest(),a.changeHistory(),a.loadCachedSnapshot()}visitRequestStarted(a){this.progressBar.setValue(0),a.hasCachedSnapshot()||"restore"!=a.action?this.showProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(a){a.loadResponse()}visitRequestFailedWithStatusCode(a,b){switch(b){case q.networkFailure:case q.timeoutFailure:case q.contentTypeMismatch:return this.reload();default:return a.loadResponse()}}visitRequestFinished(a){this.progressBar.setValue(1),this.hideProgressBar()}visitCompleted(a){a.followRedirect()}pageInvalidated(){this.reload()}visitFailed(a){}visitRendered(a){}showProgressBarAfterDelay(){this.progressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideProgressBar(){this.progressBar.hide(),null!=this.progressBarTimeout&&(window.clearTimeout(this.progressBarTimeout),delete this.progressBarTimeout)}reload(){window.location.reload()}get navigator(){return this.session.navigator}}(this),this.pageObserver=new class{constructor(a){this.stage=r.initial,this.started=!1,this.interpretReadyState=()=>{let{readyState:a}=this;"interactive"==a?this.pageIsInteractive():"complete"==a&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=a}start(){this.started||(this.stage==r.initial&&(this.stage=r.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==r.loading&&(this.stage=r.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==r.interactive&&(this.stage=r.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}(this),this.linkClickObserver=new class{constructor(a){this.started=!1,this.clickCaptured=()=>{removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=b=>{if(this.clickEventIsSignificant(b)){let a=this.findLinkFromClickTarget(b.target);if(a){let c=this.getLocationForLink(a);this.delegate.willFollowLinkToLocation(a,c)&&(b.preventDefault(),this.delegate.followedLinkToLocation(a,c))}}},this.delegate=a}start(){this.started||(addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(a){return!(a.target&&a.target.isContentEditable||a.defaultPrevented||a.which>1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)}findLinkFromClickTarget(a){if(a instanceof Element)return a.closest("a[href]:not([target^=_]):not([download])")}getLocationForLink(a){return B(a.getAttribute("href")||"")}}(this),this.formSubmitObserver=new class{constructor(a){this.started=!1,this.submitCaptured=()=>{removeEventListener("submit",this.submitBubbled,!1),addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=a=>{if(!a.defaultPrevented){let b=a.target instanceof HTMLFormElement?a.target:void 0,c=a.submitter||void 0;b&&"dialog"!=((null==c?void 0:c.getAttribute("formmethod"))||b.method)&&this.delegate.willSubmitForm(b,c)&&(a.preventDefault(),this.delegate.formSubmitted(b,c))}},this.delegate=a}start(){this.started||(addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}(this),this.scrollObserver=new class{constructor(a){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=a}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(a){this.delegate.scrollPositionChanged(a)}}(this),this.streamObserver=new class{constructor(a){var b;this.sources=new Set,this.started=!1,this.inspectFetchResponse=c=>{let a=function(c){var a;let b=null===(a=c.detail)|| void 0===a?void 0:a.fetchResponse;if(b instanceof E)return b}(c);a&&(null!==(b=a.contentType)&& void 0!==b?b:"").startsWith(v.contentType)&&(c.preventDefault(),this.receiveMessageResponse(a))},this.receiveMessageEvent=a=>{this.started&&"string"==typeof a.data&&this.receiveMessageHTML(a.data)},this.delegate=a}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(a){this.streamSourceIsConnected(a)||(this.sources.add(a),a.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(a){this.streamSourceIsConnected(a)&&(this.sources.delete(a),a.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(a){return this.sources.has(a)}async receiveMessageResponse(b){let a=await b.responseHTML;a&&this.receiveMessageHTML(a)}receiveMessageHTML(a){this.delegate.receivedMessageFromStream(new v(a))}}(this),this.frameRedirector=new class{constructor(a){this.element=a,this.linkInterceptor=new O(this,a),this.formInterceptor=new M(this,a)}start(){this.linkInterceptor.start(),this.formInterceptor.start()}stop(){this.linkInterceptor.stop(),this.formInterceptor.stop()}shouldInterceptLinkClick(a,b){return this.shouldRedirect(a)}linkClickIntercepted(b,c){let a=this.findFrameElement(b);a&&(a.src=c)}shouldInterceptFormSubmission(a,b){return this.shouldRedirect(a,b)}formSubmissionIntercepted(a,c){let b=this.findFrameElement(a);b&&b.delegate.formSubmissionIntercepted(a,c)}shouldRedirect(a,c){let b=this.findFrameElement(a);return!!b&&b!=a.closest("turbo-frame")}findFrameElement(c){let a=c.getAttribute("data-turbo-frame");if(a&&"_top"!=a){let b=this.element.querySelector(`#${a}:not([disabled])`);if(b instanceof t)return b}}}(document.documentElement),this.enabled=!0,this.progressBarDelay=500,this.started=!1}start(){this.started||(this.pageObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(a){this.adapter=a}visit(a,b={}){this.navigator.proposeVisit(B(a),b)}connectStreamSource(a){this.streamObserver.connectStreamSource(a)}disconnectStreamSource(a){this.streamObserver.disconnectStreamSource(a)}renderStreamMessage(a){document.documentElement.appendChild(v.wrap(a).fragment)}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(a){this.progressBarDelay=a}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(a){this.enabled?this.navigator.proposeVisit(a,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated()}scrollPositionChanged(a){this.history.updateRestorationData({scrollPosition:a})}willFollowLinkToLocation(a,b){return this.elementIsNavigable(a)&&this.locationIsVisitable(b)&&this.applicationAllowsFollowingLinkToLocation(a,b)}followedLinkToLocation(a,b){let c=this.getActionForLink(a);this.visit(b.href,{action:c})}allowsVisitingLocation(a){return this.applicationAllowsVisitingLocation(a)}visitProposedToLocation(a,b){aa(a),this.adapter.visitProposedToLocation(a,b)}visitStarted(a){aa(a.location),this.notifyApplicationAfterVisitingLocation(a.location)}visitCompleted(a){this.notifyApplicationAfterPageLoad(a.getTimingMetrics())}willSubmitForm(a,b){return this.elementIsNavigable(a)&&this.elementIsNavigable(b)}formSubmitted(a,b){this.navigator.submitForm(a,b)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(a){this.renderStreamMessage(a)}viewWillCacheSnapshot(){this.notifyApplicationBeforeCachingSnapshot()}viewWillRenderSnapshot({element:a},b){this.notifyApplicationBeforeRender(a)}viewRenderedSnapshot(a,b){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}viewInvalidated(){this.adapter.pageInvalidated()}applicationAllowsFollowingLinkToLocation(a,b){return!this.notifyApplicationAfterClickingLinkToLocation(a,b).defaultPrevented}applicationAllowsVisitingLocation(a){return!this.notifyApplicationBeforeVisitingLocation(a).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(a,b){return F("turbo:click",{target:a,detail:{url:b.href},cancelable:!0})}notifyApplicationBeforeVisitingLocation(a){return F("turbo:before-visit",{detail:{url:a.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(a){return F("turbo:visit",{detail:{url:a.href}})}notifyApplicationBeforeCachingSnapshot(){return F("turbo:before-cache")}notifyApplicationBeforeRender(a){return F("turbo:before-render",{detail:{newBody:a}})}notifyApplicationAfterRender(){return F("turbo:render")}notifyApplicationAfterPageLoad(a={}){return F("turbo:load",{detail:{url:this.location.href,timing:a}})}getActionForLink(c){var a;let b=c.getAttribute("data-turbo-action");return"advance"==(a=b)||"replace"==a||"restore"==a?b:"advance"}elementIsNavigable(a){let b=null==a?void 0:a.closest("[data-turbo]");return!b||"false"!=b.getAttribute("data-turbo")}locationIsVisitable(a){var b,c,d;return function(b,e){var c,a;let d=(a=(c=e).origin+c.pathname).endsWith("/")?a:a+"/";return b.href===B(d).href||b.href.startsWith(d)}(a,this.snapshot.rootLocation)&&!!((a.pathname.split("/").slice(1).slice(-1)[0].match(/\.[^.]*$/)||[])[0]||"").match(/^(?:|\.(?:htm|html|xhtml))$/)}get snapshot(){return this.view.snapshot}},{navigator:ac}=x;function y(){x.start()}function ad(a){x.registerAdapter(a)}function ae(a,b){x.visit(a,b)}function af(a){x.connectStreamSource(a)}function ag(a){x.disconnectStreamSource(a)}function ah(a){x.renderStreamMessage(a)}function ai(){x.clearCache()}function aj(a){x.setProgressBarDelay(a)}y()},function(b,d,e){var f={"./dropdown_controller.js":8,"./emails_controller.js":9,"./flag_select_controller.js":10,"./image_preview_controller.js":11,"./invoice_calculations_controller.js":12,"./invoice_controls_controller.js":16,"./navbar_controller.js":17,"./page_controller.js":18,"./preview_logo_controller.js":19,"./redirect_controller.js":20,"./require_email_controller.js":21,"./upsell_controller.js":22};function a(a){return e(c(a))}function c(a){var b=f[a];if(!(b+1))throw new Error("Cannot find module '"+a+"'.");return b}a.keys=function(){return Object.keys(f)},a.resolve=c,b.exports=a,a.id=7},function(d,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),b=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"toggle",value:function(a){a.preventDefault(),this.sourceTarget.classList.toggle("menu-dropdown-active")}}]),a}();b.targets=["source"],a.default=b},function(d,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),b=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"connect",value:function(){var a=this;this.formTarget.addEventListener("turbo:submit-end",function(c){var b=c.srcElement,d=b.getAttribute("action"),e=b.getAttribute("data-email-url");b.setAttribute("data-turbo-frame","_top"),e==d&&a.show_modal()})}},{key:"value_or_empty",value:function(a,b){return null==a||""==a?b:a}},{key:"updatePreview",value:function(a){this.emailMessagePreviewTarget.innerHTML=this.value_or_empty(this.simple_format(this.emailMessageTarget.value),this.simple_format(this.emailMessageTarget.getAttribute("placeholder"))),this.senderEmailPreviewTarget.innerHTML=this.value_or_empty(this.senderEmailTarget.value,this.senderEmailTarget.getAttribute("placeholder")),this.recipientEmailPreviewTarget.innerHTML=this.value_or_empty(this.recipientEmailTarget.value,this.recipientEmailTarget.getAttribute("placeholder")),this.disableSubmitIfEmptyValues()}},{key:"disableSubmitIfEmptyValues",value:function(){this.emailMessageTarget.value.length>0&&this.senderEmailTarget.value.length>0&&this.recipientEmailTarget.value.length>0?this.submitTarget.removeAttribute("disabled"):this.submitTarget.setAttribute("disabled","disabled")}},{key:"show_modal",value:function(a){this.bodyElement.classList.add("is-clipped"),this.modalTarget.classList.add("is-active")}},{key:"hide",value:function(a){this.bodyElement.classList.remove("is-clipped"),this.modalTarget.classList.remove("is-active"),a.preventDefault()}},{key:"whitelistEmail",value:function(a){" "!=a.key&&","!=a.key&&";"!=a.key&&"?"!=a.key&&"&"!=a.key&&"+"!=a.key||a.preventDefault()}},{key:"whitelistMessage",value:function(a){"/"!=a.key&&"\\"!=a.key||a.preventDefault()}},{key:"split_paragraphs",value:function(a){return a.split(/(?:\r?\n)+/)}},{key:"simple_format",value:function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"p";if(null==a||""==a)return a;var c=this.split_paragraphs(a);return 0==c.length?"<"+b+"></"+b+">":c.map(function(a){return a+"<br>"}).join("\n\n")}},{key:"bodyElement",get:function(){return document.querySelector("html")}}]),a}();b.targets=["modal","submit","form","emailMessage","recipientEmail","senderEmail","emailMessagePreview","recipientEmailPreview","senderEmailPreview"],a.default=b},function(d,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),b=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"activate",value:function(a){this.optionsTarget.classList.remove("hidden"),this.labelTarget.classList.add("hidden")}},{key:"deactivate",value:function(a){a&&this.labelTarget.contains(a.target)?event.preventDefault():(this.optionsTarget.classList.add("hidden"),this.labelTarget.classList.remove("hidden"))}}]),a}();b.targets=["options","label"],a.default=b},function(d,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),b=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"read_url",value:function(){var a=this.inputTarget,c=this.outputTarget,d=this.labelTarget;if(a.files&&a.files[0]){var b=new FileReader;b.onload=function(){c.src=b.result,c.classList.remove("is-hidden"),d.classList.toggle("is-hidden")},b.readAsDataURL(a.files[0])}}},{key:"rebuild",value:function(){var a=this.inputTarget,c=this.previewImageTarget;if(a.files&&a.files[0]){var b=new FileReader;b.onload=function(){c.src=b.result,c.classList.remove("is-hidden")},b.readAsDataURL(a.files[0])}}}]),a}();b.targets=["output","input","label","preview"],a.default=b},function(e,d,a){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var b,f=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a(0),h=a(2),i=a(13),j=a(14),k=(b=a(15))&&b.__esModule?b:{default:b},c=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,g.Controller),f(a,[{key:"initialize",value:function(){this.currency=this.currencyValue,this.vat_label=this.vatLabelValue,(0,k.default)(h.Big),h.Big.format={decimalSeparator:".",groupSeparator:" ",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0}}},{key:"connect",value:function(){var a=this;this.calculate(),this.notify_remove_rows_button(),this.element.addEventListener("turbo:submit-start",function(){var b=a.element.querySelectorAll("input[type=date]");Array.prototype.forEach.call(b,function(a){a.setAttribute("value",a.value)})})}},{key:"currency_changed",value:function(a){this.calculate()}},{key:"validate_and_calculate",value:function(b){var a=b.srcElement;a&&(a.value=a.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1")),this.calculate()}},{key:"calculate",value:function(){var a=new i.Invoice;this.invoice_rows.forEach(function(b){var d=b.querySelector(".unit-price"),e=b.querySelector(".vat"),f=b.querySelector(".quantity"),g=b.querySelector(".total"),c=new i.InvoiceRow(d.value,f.value,e.value);g.textContent=c.total.toFormat(2),a.add_row(c)}),a.calculate_totals(),this.render_invoice(a)}},{key:"render_invoice",value:function(a){this.invoiceTotalTarget.textContent=this.currencify(a.total.toFormat(2)),this.invoiceSubTotalTarget.textContent=this.currencify(a.sub_total.toFormat(2)),this.invoiceTotalVatTarget.textContent=this.currencify(a.total_vat.toFormat(2));var b="";for(var c in a.vat)if(a.vat.hasOwnProperty(c)){var d=a.vat[c];b+="<tr>",b+="<td>",b+="<td> "+this.vat_label+" "+c+"%</td>",b+="<td class='text-right'>"+this.currencify(d.toFormat(2))+"</td>",b+="</tr>"}this.vatTableTarget.innerHTML=b}},{key:"add_new_row",value:function(b){var e=this;b.preventDefault();var c=document.querySelector(".invoice-items tbody"),a=this.invoice_rows[0].cloneNode(!0),d=a.querySelectorAll("input"),f=(new Date).getTime();window.trow=a,row_count++,window.trow.classList.add("item-row-"+row_count),d.forEach(function(a){null!=a.name&&(a.name=e.randomize_name_integer(a.name,f)),a.value=""}),c.append(window.trow)}},{key:"remove_item",value:function(a){a.preventDefault(),this.invoice_rows.length<=1||(a.srcElement.closest("tr.invoice-item-row").remove(),this.calculate(),this.notify_remove_rows_button())}},{key:"currencify",value:function(a){return j.Currency.format(a,this.currencyTarget.value)}},{key:"notify_remove_rows_button",value:function(){this.invoice_rows,document.querySelectorAll("tr.invoice-item-row input[type=checkbox]:checked"),document.querySelector(".invoice-action-remove-row")}},{key:"randomize_name_integer",value:function(b,c){var a=b.split("][");return 3==a.length?a[0]+"]["+c+"]["+a[2]:b}},{key:"invoice_rows",get:function(){return document.querySelectorAll("tr.invoice-item-row")}}]),a}();c.targets=["row","invoiceTotal","invoiceSubTotal","invoiceTotalVat","vatTable","currency","invoiceItems"],c.values={currency:String,vatLabel:String},d.default=c},function(e,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.InvoiceRow=a.Invoice=void 0;var f=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=b(2);function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var c=function(){function a(b,c,d){h(this,a),this._unit_price=new g.Big("0"+b),this._quantity=new g.Big("0"+c),this._vat=new g.Big("0"+d).div(100)}return f(a,[{key:"vat",get:function(){return this._vat}},{key:"quantity",get:function(){return this._quantity}},{key:"vat_price",get:function(){return this.unit_price.times(this.vat).times(this.quantity)}},{key:"unit_price",get:function(){return this._unit_price}},{key:"sub_total",get:function(){return this._unit_price.times(this._quantity)}},{key:"total",get:function(){var a=this.vat.plus(new g.Big(1));return this._unit_price.times(this._quantity).times(a)}}]),a}(),d=function(){function a(){h(this,a),this._invoice_rows=[],this.reset_values()}return f(a,[{key:"reset_values",value:function(){this._sub_total=new g.Big(0),this._total=new g.Big(0),this._total_vat=new g.Big(0),this._vat={}}},{key:"add_row",value:function(a){this._invoice_rows.push(a)}},{key:"calculate_totals",value:function(){var a=this;this.reset_values(),this.calculate_vats(),this._invoice_rows.forEach(function(b){a._sub_total=a.sub_total.plus(b.sub_total),a._total_vat=a.total_vat.plus(b.vat_price),a._total=a.total.plus(b.total)})}},{key:"calculate_vats",value:function(){var a=this;this._vat={},this._invoice_rows.forEach(function(b){a.add_vat(b.vat.times(100).toFixed(2),b.vat_price)})}},{key:"add_vat",value:function(a,b){this._vat.hasOwnProperty(a)?this._vat[a]=this.vat[a].plus(b):this._vat[a]=b}},{key:"vat",get:function(){return this._vat}},{key:"sub_total",get:function(){return this._sub_total}},{key:"total",get:function(){return this._total}},{key:"total_vat",get:function(){return this._total_vat}}]),a}();a.Invoice=d,a.InvoiceRow=c},function(c,a,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return e(a,null,[{key:"format",value:function(a,c){if(this.currencies.hasOwnProperty(c)){var b=this.currencies[c];return 1==b.last?a+b.symbol:b.symbol+a}return a}},{key:"currencies",get:function(){return{EUR:{symbol:"\u20AC",last:!0},USD:{symbol:"$",last:!1},CAD:{symbol:"$",last:!1},JPY:{symbol:"\xa5",last:!0},AUD:{symbol:"$",last:!1},BRL:{symbol:"$",last:!1},HKD:{symbol:"$",last:!1},SGD:{symbol:"$",last:!1},NZD:{symbol:"$",last:!1},GBP:{symbol:"\xa3",last:!0},CHY:{symbol:"\u5143",last:!1},SWE:{symbol:"Kr",last:!0},NOK:{symbol:"kr",last:!0},KES:{symbol:"KSh",last:!0},TRY:{symbol:"\u20BA",last:!1},RUB:{symbol:"\u20BD",last:!0},KRW:{symbol:"\u20A9",last:!0},CHF:{symbol:"Fr",last:!0},THB:{symbol:"\u0E3F",last:!1},ZAR:{symbol:"R",last:!1}}}}]),a}();a.Currency=b},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};a.default=function(a){return a.prototype.toFormat=function(h,i,b){if(!this.e&&0!==this.e)return this.toString();var u,e,t,j,a,o,s,c,p,q,k,l,f,r,g,m=this.format||{},n=this.constructor.format||{};if(h!=a?"object"==(void 0===h?"undefined":d(h))?(b=h,h=a):i!=a?"object"==(void 0===i?"undefined":d(i))?(b=i,i=a):"object"!=(void 0===b?"undefined":d(b))&&(b={}):b={}:b={},c=(u=this.toFixed(h,i).split("."))[0],p=u[1],o=(s=this.s<0?c.slice(1):c).length,(q=b.decimalSeparator)==a&&(q=m.decimalSeparator)==a&&(q=n.decimalSeparator)==a&&(q="."),(k=b.groupSeparator)==a&&(k=m.groupSeparator)==a&&(k=n.groupSeparator),k&&((l=b.groupSize)==a&&(l=m.groupSize)==a&&(l=n.groupSize)==a&&(l=0),(f=b.secondaryGroupSize)==a&&(f=m.secondaryGroupSize)==a&&(f=n.secondaryGroupSize)==a&&(f=0),f?(e=+f,o-=t=+l):(e=+l,t=+f),e>0&&o>0)){for(j=o%e||e,c=s.substr(0,j);j<o;j+=e)c+=k+s.substr(j,e);t>0&&(c+=k+s.slice(j)),this.s<0&&(c="-"+c)}return p?((r=b.fractionGroupSeparator)==a&&(r=m.fractionGroupSeparator)==a&&(r=n.fractionGroupSeparator),r&&((g=b.fractionGroupSize)==a&&(g=m.fractionGroupSize)==a&&(g=n.fractionGroupSize)==a&&(g=0),(g=+g)&&(p=p.replace(new RegExp("\\d{"+g+"}\\B","g"),"$&"+r))),c+q+p):c},a.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},a}},function(d,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),b=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"connect",value:function(){var a=this;this.element.addEventListener("turbo:submit-end",function(c){var b=c.srcElement,d=b.getAttribute("action"),e=b.getAttribute("data-preview-url");a.stop_spinner(),e==d&&a.show_preview()})}},{key:"start_spinner",value:function(){this.previewActionLabelTarget.classList.add("is-hidden"),this.previewSpinnerTarget.classList.remove("is-hidden")}},{key:"stop_spinner",value:function(){this.previewActionLabelTarget.classList.remove("is-hidden"),this.previewSpinnerTarget.classList.add("is-hidden")}},{key:"hide_preview",value:function(){this.previewFrameTarget.classList.add("is-hidden"),this.innerFormTarget.classList.remove("is-hidden"),this.previewActionTarget.classList.remove("is-hidden"),this.editActionTarget.classList.add("is-hidden")}},{key:"show_preview",value:function(){this.previewFrameTarget.classList.remove("is-hidden"),this.innerFormTarget.classList.add("is-hidden"),this.previewActionTarget.classList.add("is-hidden"),this.editActionTarget.classList.remove("is-hidden")}},{key:"edit_invoice",value:function(a){this.hide_preview()}},{key:"toggle_due_date_control",value:function(a){return a.preventDefault(),this.dueDateControlTarget.classList.toggle("is-hidden"),this.dueDateDisplayTarget.classList.toggle("is-hidden"),!1}}]),a}();b.targets=["innerForm","editAction","previewAction","previewFrame","dueDateControl","dueDateDisplay","previewActionLabel","previewSpinner","previewImage","logoImage"],a.default=b},function(d,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),b=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"toggle_burger",value:function(a){a.preventDefault(),this.menuTarget.classList.toggle("is-active"),this.burgerTarget.classList.toggle("is-active")}},{key:"toggle_menu",value:function(a){a.preventDefault(),this.dropdownTarget.classList.toggle("is-active")}},{key:"hide_menu",value:function(a){!0!==this.dropdownTarget.contains(a.target)&&this.dropdownTarget.classList.contains("is-active")&&(a.preventDefault(),this.dropdownTarget.classList.remove("is-active"))}}]),a}();b.targets=["menu","burger","dropdown"],a.default=b},function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=b(0),g=b(1),c=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"show_email",value:function(a){this.headerTarget.classList.add("is-hidden"),this.emailActionsTarget.classList.remove("is-hidden"),this.invoicePageTarget.classList.add("is-hidden"),this.emailPageTarget.classList.remove("is-hidden"),this.marketingTarget.classList.add("is-hidden"),g.RequiredInputFields.enable_for_send_invoice(),a.preventDefault()}},{key:"show_invoice",value:function(a){this.headerTarget.classList.remove("is-hidden"),this.emailActionsTarget.classList.add("is-hidden"),this.invoicePageTarget.classList.remove("is-hidden"),this.emailPageTarget.classList.add("is-hidden"),this.marketingTarget.classList.remove("is-hidden"),a.preventDefault()}}]),a}();c.targets=["header","emailActions","invoicePage","emailPage","marketing","form"],a.default=c},function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=b(0),c=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"connect",value:function(){var a=this;this.invoiceFormElement.addEventListener("turbo:submit-end",function(b){a.update_logo()}),this.update_logo()}},{key:"update_logo",value:function(){this.element.src=this.sourceElement.src,this.sourceElement.src.startsWith("data:image")?this.element.classList.remove("is-hidden"):this.element.classList.add("is-hidden")}},{key:"sourceElement",get:function(){return document.getElementById("logo-image-source")}},{key:"invoiceFormElement",get:function(){return document.getElementById("invoice-form")}}]),a}();a.default=c},function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=b(0),g=b(1),c=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"post_to_print",value:function(a){a.preventDefault();var b=this.element.getAttribute("data-print-url");this.element.action=b,this.element.submit()}},{key:"post_to_email",value:function(b){var a=this.element.getAttribute("data-email-url");this.element.action=a,this.submitLabelTarget.classList.add("is-hidden"),this.submitSpinnerTarget.classList.remove("is-hidden")}},{key:"reset_email",value:function(a){this.submitLabelTarget.classList.remove("is-hidden"),this.submitSpinnerTarget.classList.add("is-hidden")}},{key:"post_to_preview",value:function(b){var a=this.element.getAttribute("data-preview-url");this.element.action=a,g.RequiredInputFields.remove_all()}},{key:"restore_preview_path",value:function(){var a=this.element.getAttribute("data-preview-url");this.element.action=a}}]),a}();c.targets=["submitLabel","submitSpinner"],a.default=c},function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=b(0),g=b(1),c=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"hide",value:function(a){a.preventDefault(),this.modalTarget.classList.remove("is-active"),this.reset_subviews(),this.sourceTarget.value=""}},{key:"show",value:function(a){g.RequiredInputFields.enable_for_required_email(),this.modalTarget.classList.add("is-active"),this.reset_subviews(),this.sourceTarget.value="",this.disable_ctas()}},{key:"ready",value:function(a){this.modalTarget.querySelector('[name="form"]').classList.toggle("is-hidden"),this.modalTarget.querySelector('[name="done"]').classList.toggle("is-hidden")}},{key:"update",value:function(c){var a=this.sourceTarget.value;if(a.length>0&&this.validate_email(a)){this.enable_ctas();var b=this.form.querySelector('[name="invoice[sender_email]"');b&&(b.value=a)}else this.disable_ctas()}},{key:"validate_email",value:function(a){return/^[^\s@]+@[^\s@]+$/.test(a)}},{key:"reset_subviews",value:function(){this.modalTarget.querySelector('[name="form"]').classList.remove("is-hidden"),this.modalTarget.querySelector('[name="done"]').classList.add("is-hidden")}},{key:"disable_ctas",value:function(){this.ctaTargets.forEach(function(a){a.setAttribute("disabled","disabled")})}},{key:"enable_ctas",value:function(){this.ctaTargets.forEach(function(a){a.removeAttribute("disabled")})}},{key:"form",get:function(){return document.getElementById("invoice-form")}}]),a}();c.targets=["cta","source","modal"],a.default=c},function(d,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),b=function(b){function a(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,f.Controller),e(a,[{key:"show",value:function(a){this.bodyElement.classList.add("is-clipped"),this.modalTarget.classList.add("is-active")}},{key:"hide",value:function(a){this.bodyElement.classList.remove("is-clipped"),this.modalTarget.classList.remove("is-active"),a.preventDefault()}},{key:"bodyElement",get:function(){return document.querySelector("html")}}]),a}();b.targets=["modal"],a.default=b}])
